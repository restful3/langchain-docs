# Part 3: ì²« ë²ˆì§¸ Agent ë§Œë“¤ê¸°

> ğŸ“š **í•™ìŠµ ì‹œê°„**: ì•½ 3-4ì‹œê°„
> ğŸ¯ **ë‚œì´ë„**: â­â­â˜†â˜†â˜† (ì´ˆê¸‰)
> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md), [03-quickstart.md](../official/03-quickstart_ko.md)
> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [part03_first_agent ë””ë ‰í† ë¦¬](../src/part03_first_agent/)

---

## ğŸ“‹ í•™ìŠµ ëª©í‘œ

ì´ íŒŒíŠ¸ë¥¼ ì™„ë£Œí•˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- [ ] `create_agent()` APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ Agentë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
- [ ] Agentì˜ ë™ì‘ ì›ë¦¬ì™€ ì‹¤í–‰ ë£¨í”„ë¥¼ ì´í•´í•œë‹¤
- [ ] ì‹¤ì „ ë‚ ì”¨ Agentë¥¼ êµ¬í˜„í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤
- [ ] ReAct íŒ¨í„´(Reasoning + Acting)ì˜ ê°œë…ê³¼ ë™ì‘ ë°©ì‹ì„ ì´í•´í•œë‹¤
- [ ] System Promptë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ì—¬ Agentì˜ ì„±ê²©ê³¼ í–‰ë™ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤
- [ ] Streaming ëª¨ë“œë¡œ Agentì˜ ì‹¤ì‹œê°„ ì‘ë‹µì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤

---

## ğŸ“š ê°œìš”

ì´ íŒŒíŠ¸ì—ì„œëŠ” **ë“œë””ì–´ ì²« ë²ˆì§¸ ì§„ì§œ Agent**ë¥¼ ë§Œë“¤ì–´ë´…ë‹ˆë‹¤! Part 1ì—ì„œ LangChainì˜ ê°œë…ì„ ë°°ì› ê³ , Part 2ì—ì„œ Chat Models, Messages, Toolsë¥¼ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ì´ì œ ì´ ëª¨ë“  ê²ƒì„ ê²°í•©í•˜ì—¬ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” Agentë¥¼ ë§Œë“¤ ì°¨ë¡€ì…ë‹ˆë‹¤.

### ì™œ ì¤‘ìš”í•œê°€?

- **ì‹¤ì „ Agent ê°œë°œì˜ ì‹œì‘**: ë‹¨ìˆœí•œ Tool Callingì„ ë„˜ì–´ ììœ¨ì ìœ¼ë¡œ ì˜ì‚¬ê²°ì •í•˜ëŠ” Agentë¥¼ ë§Œë“­ë‹ˆë‹¤
- **ReAct íŒ¨í„´ ì´í•´**: í˜„ëŒ€ AI Agentì˜ í•µì‹¬ íŒ¨í„´ì¸ ReAct(Reasoning + Acting)ë¥¼ ì‹¤ìŠµìœ¼ë¡œ ìµí™ë‹ˆë‹¤
- **í”„ë¡œë•ì…˜ ì¤€ë¹„**: `create_agent()`ëŠ” LangChainì˜ í”„ë¡œë•ì…˜ ë ˆë²¨ Agent êµ¬í˜„ì…ë‹ˆë‹¤
- **í™•ì¥ ê°€ëŠ¥í•œ ê¸°ë°˜**: ì´í›„ ë³µì¡í•œ Multi-Agent ì‹œìŠ¤í…œìœ¼ë¡œ í™•ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ì´ˆë¥¼ ë‹¤ì§‘ë‹ˆë‹¤

### ì‹¤ë¬´ í™œìš© ì‚¬ë¡€

- **ë‚ ì”¨ ë¹„ì„œ Agent**: ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ê³  ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ëŒ€í™”í˜• ë¹„ì„œ
- **ê³ ê° ì§€ì› Agent**: ê³ ê° ì§ˆë¬¸ì„ ì´í•´í•˜ê³  FAQë¥¼ ê²€ìƒ‰í•˜ë©° í‹°ì¼“ì„ ìƒì„±í•˜ëŠ” Agent
- **ë°ì´í„° ë¶„ì„ Agent**: ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¿¼ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ì‹œê°í™”í•˜ëŠ” Agent
- **ë¦¬ì„œì¹˜ Agent**: ì—¬ëŸ¬ ì›¹ ì†ŒìŠ¤ë¥¼ ê²€ìƒ‰í•˜ê³  ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” Agent

### bind_tools() vs create_agent(): ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€?

Part 2ì—ì„œ ë°°ìš´ `bind_tools()`ì™€ `create_agent()`ì˜ ì°¨ì´ì ì„ ëª…í™•íˆ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤:

| íŠ¹ì§• | bind_tools() | create_agent() |
|------|-------------|----------------|
| **ì—­í• ** | ëª¨ë¸ì— ë„êµ¬ ìŠ¤í‚¤ë§ˆë§Œ ì œê³µ | ì™„ì „í•œ Agent ëŸ°íƒ€ì„ ì œê³µ |
| **ì‹¤í–‰ ë£¨í”„** | ìˆ˜ë™ìœ¼ë¡œ êµ¬í˜„ í•„ìš” | ìë™ìœ¼ë¡œ ì²˜ë¦¬ |
| **Tool í˜¸ì¶œ** | í•œ ë²ˆë§Œ ì‹œë„ | ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ë°˜ë³µ |
| **ìƒíƒœ ê´€ë¦¬** | ì§ì ‘ ê´€ë¦¬ | ìë™ ê´€ë¦¬ |
| **ìŠ¤íŠ¸ë¦¬ë°** | ìˆ˜ë™ êµ¬í˜„ | ë‚´ì¥ ì§€ì› |
| **Human-in-the-loop** | ìˆ˜ë™ êµ¬í˜„ | ë‚´ì¥ ì§€ì› |
| **í”„ë¡œë•ì…˜ ì¤€ë¹„ë„** | ë‚®ìŒ | ë†’ìŒ |

```python
# bind_tools(): í•œ ë²ˆì˜ tool call
model_with_tools = model.bind_tools([get_weather])
response = model_with_tools.invoke("ì„œìš¸ ë‚ ì”¨ëŠ”?")
# â†’ Tool callë§Œ ë°˜í™˜, ì§ì ‘ ì‹¤í–‰í•˜ê³  ë‹¤ì‹œ ëª¨ë¸ì— ì „ë‹¬í•´ì•¼ í•¨

# create_agent(): ìë™ìœ¼ë¡œ ë°˜ë³µ ì‹¤í–‰
agent = create_agent(model, tools=[get_weather])
response = agent.invoke({"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]})
# â†’ ì™„ì „í•œ ë‹µë³€ ë°˜í™˜, Tool ì‹¤í–‰ë¶€í„° ìµœì¢… ë‹µë³€ê¹Œì§€ ìë™ ì²˜ë¦¬
```

**ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í• ê¹Œ?**
- **bind_tools()**: Tool callingì„ ì§ì ‘ ì œì–´í•˜ê³  ì‹¶ì„ ë•Œ, ì»¤ìŠ¤í…€ ë¡œì§ì´ í•„ìš”í•  ë•Œ
- **create_agent()**: í”„ë¡œë•ì…˜ Agentë¥¼ ë¹ ë¥´ê²Œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ (ëŒ€ë¶€ë¶„ì˜ ê²½ìš°)

---

## 1. create_agent() ê¸°ë³¸

### 1.1 Agentë€? (ê°„ë‹¨í•œ ë³µìŠµ)

**Agent**ëŠ” ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ììœ¨ì ìœ¼ë¡œ ë„êµ¬ë¥¼ ì„ íƒí•˜ê³  ì‹¤í–‰í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Part 1ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ë‹¤ì‹œ ìƒê¸°í•´ë³´ê² ìŠµë‹ˆë‹¤.

```mermaid
graph LR
    A[ì‚¬ìš©ì ì…ë ¥] --> B[Agent]
    B --> C[LLM<br/>ì¶”ë¡  ì—”ì§„]
    B --> D[ë„êµ¬<br/>ì‹¤í–‰ê¸°]
    B --> E[ë©”ëª¨ë¦¬<br/>ëŒ€í™” ê¸°ë¡]
    C --> B
    D --> B
    E --> B
    B --> F[ì‘ë‹µ]

    style B fill:#e1f5ff,stroke:#01579b
    style C fill:#fff3e0,stroke:#e65100
    style D fill:#f3e5f5,stroke:#4a148c
    style E fill:#e8f5e9,stroke:#1b5e20
```

**Agentì˜ í•µì‹¬ íŠ¹ì§•**:
1. **ììœ¨ì„±**: ì–´ë–¤ ë„êµ¬ë¥¼ ì‚¬ìš©í• ì§€ ìŠ¤ìŠ¤ë¡œ ê²°ì •
2. **ë°˜ë³µì„±**: ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ë„êµ¬ë¥¼ ë°˜ë³µ ì‹¤í–‰
3. **ì¶”ë¡ **: ê° ë‹¨ê³„ì—ì„œ ë¬´ì—‡ì„ í•´ì•¼ í• ì§€ ìƒê°
4. **ì ì‘ì„±**: ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ì— ë”°ë¼ ì „ëµ ì¡°ì •

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md#agent) - Agent ê°œë… ì„¤ëª…

### 1.2 create_agent() API

`create_agent()`ëŠ” LangChainì—ì„œ ì œê³µí•˜ëŠ” í”„ë¡œë•ì…˜ ë ˆë²¨ Agent êµ¬í˜„ì…ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ [LangGraph](https://docs.langchain.com/oss/python/langgraph/overview)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê·¸ë˜í”„ ê¸°ë°˜ Agentë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### ê¸°ë³¸ ì‹œê·¸ë‹ˆì²˜

```python
from langchain.agents import create_agent

agent = create_agent(
    model,                    # ì¶”ë¡ ì— ì‚¬ìš©í•  LLM (í•„ìˆ˜)
    tools=[],                # Agentê°€ ì‚¬ìš©í•  ë„êµ¬ ë¦¬ìŠ¤íŠ¸ (í•„ìˆ˜)
    system_prompt=None,      # Agentì˜ ì—­í• ê³¼ ì§€ì¹¨ (ì„ íƒ)
    checkpointer=None,       # ìƒíƒœ ì €ì¥ì„ ìœ„í•œ ì²´í¬í¬ì¸í„° (ì„ íƒ)
    state_schema=None,       # ì»¤ìŠ¤í…€ ìƒíƒœ ìŠ¤í‚¤ë§ˆ (ì„ íƒ)
    response_format=None,    # êµ¬ì¡°í™”ëœ ì‘ë‹µ í˜•ì‹ (ì„ íƒ)
    middleware=[],           # ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´ (ì„ íƒ)
    context_schema=None,     # ëŸ°íƒ€ì„ ì»¨í…ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ (ì„ íƒ)
)
```

#### ì£¼ìš” íŒŒë¼ë¯¸í„° ì„¤ëª…

1. **model** (í•„ìˆ˜)
   - LLM ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ëª¨ë¸ ì‹ë³„ì ë¬¸ìì—´
   - ì˜ˆ: `"openai:gpt-4o-mini"`, `ChatOpenAI(model="gpt-4o")`

2. **tools** (í•„ìˆ˜)
   - Agentê°€ ì‚¬ìš©í•  ë„êµ¬ ë¦¬ìŠ¤íŠ¸
   - ë¹ˆ ë¦¬ìŠ¤íŠ¸ë„ ê°€ëŠ¥ (ë„êµ¬ ì—†ëŠ” Agent)

3. **system_prompt** (ì„ íƒ)
   - Agentì˜ ì—­í• , ì„±ê²©, í–‰ë™ ì§€ì¹¨
   - ë¬¸ìì—´ ë˜ëŠ” SystemMessage ê°ì²´

4. **checkpointer** (ì„ íƒ)
   - ëŒ€í™” ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì²´í¬í¬ì¸í„°
   - ë©€í‹°í„´ ëŒ€í™”ì— í•„ìš”

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [01_basic_agent.py](../src/part03_first_agent/01_basic_agent.py) ë¼ì¸ 77-112

### 1.3 Agent ì‹¤í–‰ ë£¨í”„

AgentëŠ” **ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ë°˜ë³µ ì‹¤í–‰**í•˜ëŠ” ë£¨í”„ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë£¨í”„ëŠ” LangGraphê°€ ìë™ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

```mermaid
flowchart TD
    input([ì‚¬ìš©ì ì…ë ¥])
    model{LLM<br/>ì¶”ë¡ }
    tools[ë„êµ¬ ì‹¤í–‰]
    output([ìµœì¢… ë‹µë³€])

    input --> model

    model -->|ë„êµ¬ í˜¸ì¶œ í•„ìš”| tools
    tools -->|ê´€ì°° ê²°ê³¼| model

    model -->|ë‹µë³€ ì¤€ë¹„ë¨| output

    style input fill:#e3f2fd,stroke:#1565c0
    style model fill:#fff3e0,stroke:#e65100
    style tools fill:#f3e5f5,stroke:#7b1fa2
    style output fill:#e8f5e9,stroke:#2e7d32
```

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 9-26 - Agent ì‹¤í–‰ íë¦„ë„

**ì‹¤í–‰ ë£¨í”„ì˜ ë‹¨ê³„**:

1. **ì…ë ¥**: ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ Agentì— ì „ë‹¬
2. **ì¶”ë¡ **: LLMì´ í˜„ì¬ ìƒí™©ì„ ë¶„ì„í•˜ê³  ë‹¤ìŒ ì•¡ì…˜ ê²°ì •
3. **ë„êµ¬ í˜¸ì¶œ**: í•„ìš”í•˜ë©´ ë„êµ¬ë¥¼ í˜¸ì¶œ (ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥)
4. **ê´€ì°°**: ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ LLMì— ì „ë‹¬
5. **ë°˜ë³µ ë˜ëŠ” ì¢…ë£Œ**:
   - ë” ë§ì€ ì •ë³´ê°€ í•„ìš”í•˜ë©´ 2ë²ˆìœ¼ë¡œ ëŒì•„ê°
   - ì¶©ë¶„í•œ ì •ë³´ê°€ ëª¨ì˜€ìœ¼ë©´ ìµœì¢… ë‹µë³€ ìƒì„±

**ì¢…ë£Œ ì¡°ê±´**:
- LLMì´ ë„êµ¬ í˜¸ì¶œ ì—†ì´ ìµœì¢… ë‹µë³€ì„ ìƒì„±í–ˆì„ ë•Œ
- ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜(iteration limit)ì— ë„ë‹¬í–ˆì„ ë•Œ (ê¸°ë³¸: 25íšŒ)
- ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ ì¤‘ë‹¨í–ˆì„ ë•Œ

### 1.4 ì²« ë²ˆì§¸ Agent ë§Œë“¤ê¸°

ê°€ì¥ ê°„ë‹¨í•œ Agentë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```python
from langchain.agents import create_agent
from langchain.tools import tool
from langchain_openai import ChatOpenAI

# 1. ë„êµ¬ ì •ì˜
@tool
def get_weather(city: str) -> str:
    """ì£¼ì–´ì§„ ë„ì‹œì˜ í˜„ì¬ ë‚ ì”¨ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤.

    Args:
        city: ë„ì‹œ ì´ë¦„ (ì˜ˆ: ì„œìš¸, ë¶€ì‚°, ë‰´ìš•)
    """
    # ë”ë¯¸ ë°ì´í„° (ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ)
    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, 22Â°C",
        "ë¶€ì‚°": "íë¦¼, 20Â°C",
        "ë‰´ìš•": "ë¹„, 15Â°C",
    }
    return weather_data.get(city, f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

# 2. LLM ì´ˆê¸°í™”
model = ChatOpenAI(model="gpt-4o-mini", temperature=0)

# 3. Agent ìƒì„±
agent = create_agent(
    model=model,
    tools=[get_weather],
)

# 4. Agent ì‹¤í–‰
result = agent.invoke({
    "messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]
})

# 5. ê²°ê³¼ í™•ì¸
print(result["messages"][-1].content)
# ì¶œë ¥: "ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ëŠ” ë§‘ê³ , ê¸°ì˜¨ì€ 22ë„ì…ë‹ˆë‹¤."
```

**ğŸ’¡ ì½”ë“œ ì„¤ëª…**:
1. `@tool` ë°ì½”ë ˆì´í„°ë¡œ ë„êµ¬ë¥¼ ì •ì˜í•©ë‹ˆë‹¤ (Part 2ì—ì„œ ë°°ìš´ ë‚´ìš©)
2. LLMì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤ (temperature=0ìœ¼ë¡œ ì¼ê´€ëœ ì‘ë‹µ ë³´ì¥)
3. `create_agent()`ë¡œ Agentë¥¼ ìƒì„±í•©ë‹ˆë‹¤
4. `invoke()`ë¡œ Agentë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤ (ë©”ì‹œì§€ëŠ” ë”•ì…”ë„ˆë¦¬ í˜•íƒœ)
5. ê²°ê³¼ì˜ ë§ˆì§€ë§‰ ë©”ì‹œì§€ê°€ Agentì˜ ìµœì¢… ë‹µë³€ì…ë‹ˆë‹¤

**ì‹¤í–‰ ê³¼ì • ë¶„ì„**:
```
[ì…ë ¥] ì‚¬ìš©ì: "ì„œìš¸ ë‚ ì”¨ëŠ”?"
   â†“
[ì¶”ë¡ ] LLM: "ë‚ ì”¨ ì •ë³´ê°€ í•„ìš”í•˜ë‹ˆ get_weather ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì•¼ê² ë‹¤"
   â†“
[ë„êµ¬ í˜¸ì¶œ] get_weather(city="ì„œìš¸")
   â†“
[ê´€ì°°] ë„êµ¬ ê²°ê³¼: "ë§‘ìŒ, 22Â°C"
   â†“
[ì¶”ë¡ ] LLM: "ì´ì œ ë‹µë³€ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤"
   â†“
[ì¶œë ¥] Agent: "ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ëŠ” ë§‘ê³ , ê¸°ì˜¨ì€ 22ë„ì…ë‹ˆë‹¤."
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [01_basic_agent.py](../src/part03_first_agent/01_basic_agent.py) ë¼ì¸ 77-112
>
> **ğŸ’¡ ì‹¤ìŠµ í¬ì¸íŠ¸**:
> 1. ì½”ë“œë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ê³  ì—¬ëŸ¬ ë„ì‹œë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”
> 2. `result["messages"]`ë¥¼ ì¶œë ¥í•˜ì—¬ ëª¨ë“  ì¤‘ê°„ ë©”ì‹œì§€ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”
> 3. ë„êµ¬ í•¨ìˆ˜ì˜ docstringì„ ìˆ˜ì •í•˜ë©´ Agentì˜ í–‰ë™ì´ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ê´€ì°°í•˜ì„¸ìš”

---

## 2. ë‚ ì”¨ Agent êµ¬í˜„

ì´ì œ ì‹¤ì „ ìˆ˜ì¤€ì˜ ë‚ ì”¨ Agentë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ì´ AgentëŠ” ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ê³ , ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ì¬ì¹˜ìˆëŠ” ë§íˆ¬ë¡œ ëŒ€í™”í•©ë‹ˆë‹¤.

### 2.1 ìš”êµ¬ì‚¬í•­ ì •ì˜

**ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**:
1. ì‚¬ìš©ìê°€ ë„ì‹œë¥¼ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ ìœ„ì¹˜ë¥¼ í™•ì¸í•´ì•¼ í•¨
2. ë‚ ì”¨ ì •ë³´ë¥¼ ëª…í™•í•˜ê³  ì¹œì ˆí•˜ê²Œ ì œê³µ
3. ì¬ì¹˜ìˆê³  ìœ ë¨¸ëŸ¬ìŠ¤í•œ ë§íˆ¬ ì‚¬ìš© (ë‚ ì”¨ ê´€ë ¨ ë§ì¥ë‚œ)
4. ì—¬ëŸ¬ ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ë¹„êµí•  ìˆ˜ ìˆì–´ì•¼ í•¨

**ê¸°ìˆ  ìš”êµ¬ì‚¬í•­**:
1. ë‘ ê°œì˜ ë„êµ¬: `get_weather_for_location`, `get_user_location`
2. ì‚¬ìš©ìë³„ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ (user_idë¡œ ìœ„ì¹˜ íŒŒì•…)
3. ëª…í™•í•œ System Promptë¡œ Agent ì„±ê²© ì •ì˜
4. êµ¬ì¡°í™”ëœ ì‘ë‹µ í˜•ì‹ (ResponseFormat)

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [03-quickstart.md](../official/03-quickstart_ko.md) ë¼ì¸ 46-194 - ì‹¤ì „ ë‚ ì”¨ Agent ì˜ˆì œ

### 2.2 ë„êµ¬ ì‘ì„±

ë¨¼ì € ë‘ ê°œì˜ ë„êµ¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

```python
from dataclasses import dataclass
from langchain.tools import tool, ToolRuntime

@tool
def get_weather_for_location(city: str) -> str:
    """ì£¼ì–´ì§„ ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

    Args:
        city: ë‚ ì”¨ë¥¼ ì¡°íšŒí•  ë„ì‹œ ì´ë¦„
    """
    # ì‹¤ì œë¡œëŠ” ë‚ ì”¨ API í˜¸ì¶œ
    weather_data = {
        "ì„œìš¸": "ë§‘ìŒ, 22Â°C, ìŠµë„ 60%",
        "ë¶€ì‚°": "íë¦¼, 20Â°C, ìŠµë„ 70%",
        "ë‰´ìš•": "ë¹„, 15Â°C, ìŠµë„ 85%",
        "íŒŒë¦¬": "ë§‘ìŒ, 18Â°C, ìŠµë„ 55%",
    }
    return weather_data.get(city, f"{city}ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

# ì»¨í…ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ ì •ì˜
@dataclass
class Context:
    """ëŸ°íƒ€ì„ ì»¨í…ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ"""
    user_id: str

@tool
def get_user_location(runtime: ToolRuntime[Context]) -> str:
    """í˜„ì¬ ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

    ToolRuntimeì„ í†µí•´ ëŸ°íƒ€ì„ ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼í•©ë‹ˆë‹¤.
    """
    user_id = runtime.context.user_id

    # ì‹¤ì œë¡œëŠ” DBë‚˜ IP ê¸°ë°˜ ìœ„ì¹˜ ì¡°íšŒ
    location_map = {
        "1": "ì„œìš¸",
        "2": "ë¶€ì‚°",
        "3": "ë‰´ìš•",
    }

    return location_map.get(user_id, "ì„œìš¸")  # ê¸°ë³¸ê°’: ì„œìš¸

tools = [get_weather_for_location, get_user_location]
```

**ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸**:
1. **get_weather_for_location**: ëª…ì‹œëœ ë„ì‹œì˜ ë‚ ì”¨ ì¡°íšŒ
2. **get_user_location**: ëŸ°íƒ€ì„ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ìœ„ì¹˜ íŒŒì•…
3. **ToolRuntime[Context]**: íƒ€ì… íŒíŠ¸ë¡œ ì»¨í…ìŠ¤íŠ¸ êµ¬ì¡° ëª…ì‹œ
4. **ëª…í™•í•œ docstring**: LLMì´ ë„êµ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ë„ë¡ ì•ˆë‚´

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [03-quickstart.md](../official/03-quickstart_ko.md) ë¼ì¸ 77-98 - ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë„êµ¬

### 2.3 Agent ìƒì„±

ì´ì œ System Promptì™€ í•¨ê»˜ Agentë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```python
from langchain.agents import create_agent
from langchain.chat_models import init_chat_model

# 1. System Prompt ì •ì˜
SYSTEM_PROMPT = """ë‹¹ì‹ ì€ ì „ë¬¸ ë‚ ì”¨ ì˜ˆë³´ê´€ì´ë©°, ë§ì¥ë‚œì„ ì¢‹ì•„í•©ë‹ˆë‹¤.

ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
- get_weather_for_location: íŠ¹ì • ë„ì‹œì˜ ë‚ ì”¨ ì¡°íšŒ
- get_user_location: ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ ì¡°íšŒ

ì‚¬ìš©ìê°€ ë‚ ì”¨ë¥¼ ë¬¼ì–´ë³´ë©´ ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.
ì‚¬ìš©ìê°€ "ì—¬ê¸°", "í˜„ì¬" ê°™ì€ í‘œí˜„ì„ ì“°ë©´ get_user_location ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

ë‹µë³€ì€ ì¹œê·¼í•˜ê³  ì¬ì¹˜ìˆê²Œ, ë‚ ì”¨ ê´€ë ¨ ë§ì¥ë‚œì„ ì„ì–´ì„œ ì‘ì„±í•˜ì„¸ìš”."""

# 2. ëª¨ë¸ ì„¤ì •
model = init_chat_model(
    "claude-sonnet-4-5-20250929",
    temperature=0.5,  # ì°½ì˜ì ì¸ ë§ì¥ë‚œì„ ìœ„í•´ ì•½ê°„ì˜ randomness
    timeout=10,
    max_tokens=1000
)

# 3. Agent ìƒì„±
agent = create_agent(
    model=model,
    system_prompt=SYSTEM_PROMPT,
    tools=[get_weather_for_location, get_user_location],
    context_schema=Context,  # ì»¨í…ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ ëª…ì‹œ
)
```

**ğŸ’¡ System Prompt ì‘ì„± íŒ**:
1. **ì—­í•  ëª…ì‹œ**: "ë‹¹ì‹ ì€ ì „ë¬¸ ë‚ ì”¨ ì˜ˆë³´ê´€"
2. **ì„±ê²© ì •ì˜**: "ë§ì¥ë‚œì„ ì¢‹ì•„í•©ë‹ˆë‹¤"
3. **ë„êµ¬ ì„¤ëª…**: ê° ë„êµ¬ì˜ ìš©ë„ ëª…í™•íˆ ì„¤ëª…
4. **ì¡°ê±´ë¶€ ë¡œì§**: "~í•˜ë©´ ~í•˜ì„¸ìš”" í˜•íƒœì˜ ì§€ì¹¨
5. **ì‘ë‹µ ìŠ¤íƒ€ì¼**: "ì¹œê·¼í•˜ê³  ì¬ì¹˜ìˆê²Œ" ê°™ì€ í†¤ ì§€ì •

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [03-quickstart.md](../official/03-quickstart_ko.md) ë¼ì¸ 57-69 - System Prompt ì •ì˜
> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 242-283 - System Prompt ê³ ê¸‰ ê¸°ë²•

### 2.4 Agent ì‹¤í–‰

êµ¬ì¡°í™”ëœ ì‘ë‹µ í˜•ì‹ê³¼ í•¨ê»˜ Agentë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```python
from dataclasses import dataclass
from langchain.agents.structured_output import ToolStrategy

# ì‘ë‹µ í˜•ì‹ ì •ì˜
@dataclass
class ResponseFormat:
    """ë‚ ì”¨ Agent ì‘ë‹µ ìŠ¤í‚¤ë§ˆ"""
    punny_response: str  # ë§ì¥ë‚œì´ ì„ì¸ ë‹µë³€ (í•„ìˆ˜)
    weather_conditions: str | None = None  # ë‚ ì”¨ ìƒì„¸ ì •ë³´ (ì„ íƒ)

# Agent ìƒì„± (ì‘ë‹µ í˜•ì‹ ì¶”ê°€)
agent = create_agent(
    model=model,
    system_prompt=SYSTEM_PROMPT,
    tools=[get_weather_for_location, get_user_location],
    context_schema=Context,
    response_format=ToolStrategy(ResponseFormat),  # êµ¬ì¡°í™”ëœ ì‘ë‹µ
)

# ì‹¤í–‰
config = {"configurable": {"thread_id": "1"}}  # ëŒ€í™” ìŠ¤ë ˆë“œ ID

response = agent.invoke(
    {"messages": [{"role": "user", "content": "ë°–ì— ë‚ ì”¨ ì–´ë•Œ?"}]},
    config=config,
    context=Context(user_id="1")  # ì‚¬ìš©ì ID ì „ë‹¬
)

# êµ¬ì¡°í™”ëœ ì‘ë‹µ ì¶œë ¥
print(response['structured_response'])
# ResponseFormat(
#     punny_response="ì„œìš¸ì€ ì •ë§ 'í™”ì°½'í•œ ë‚ ì”¨ë„¤ìš”! íƒœì–‘ì´ 'ë¹›-ë‚˜'ê²Œ ì›ƒê³  ìˆë‹µë‹ˆë‹¤!",
#     weather_conditions="ë§‘ìŒ, 22Â°C, ìŠµë„ 60%"
# )
```

**ì‹¤í–‰ ê³¼ì • ë¶„ì„**:
```
1. [ì…ë ¥] ì‚¬ìš©ì: "ë°–ì— ë‚ ì”¨ ì–´ë•Œ?"
2. [ì¶”ë¡ ] Agent: "'ë°–'ì€ ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì˜ë¯¸í•˜ëŠ”êµ°. get_user_locationì„ í˜¸ì¶œí•´ì•¼ê² ë‹¤"
3. [ë„êµ¬ í˜¸ì¶œ] get_user_location() â†’ "ì„œìš¸"
4. [ì¶”ë¡ ] Agent: "ì„œìš¸ì˜ ë‚ ì”¨ ì •ë³´ê°€ í•„ìš”í•´. get_weather_for_locationì„ í˜¸ì¶œí•˜ì"
5. [ë„êµ¬ í˜¸ì¶œ] get_weather_for_location(city="ì„œìš¸") â†’ "ë§‘ìŒ, 22Â°C, ìŠµë„ 60%"
6. [ì¶”ë¡ ] Agent: "ì´ì œ ë§ì¥ë‚œì„ ì„ì–´ì„œ ë‹µë³€ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤"
7. [ì¶œë ¥] Agent: ResponseFormat(punny_response="...", weather_conditions="...")
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [02_weather_agent.py](../src/part03_first_agent/02_weather_agent.py)
> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [03-quickstart.md](../official/03-quickstart_ko.md) ë¼ì¸ 149-192 - ì „ì²´ ì˜ˆì œ

### 2.5 ê²°ê³¼ ë¶„ì„

ë‚ ì”¨ Agentì˜ ë™ì‘ì„ ìì„¸íˆ ë¶„ì„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```python
# ëª¨ë“  ë©”ì‹œì§€ ì¶œë ¥ (ë””ë²„ê¹…)
for i, msg in enumerate(response["messages"]):
    print(f"\n--- Message {i+1}: {msg.__class__.__name__} ---")

    if hasattr(msg, "content") and msg.content:
        print(f"Content: {msg.content[:100]}...")

    if hasattr(msg, "tool_calls") and msg.tool_calls:
        print(f"Tool Calls: {msg.tool_calls}")
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
--- Message 1: HumanMessage ---
Content: ë°–ì— ë‚ ì”¨ ì–´ë•Œ?

--- Message 2: AIMessage ---
Tool Calls: [{'name': 'get_user_location', 'args': {}, 'id': 'call_abc123'}]

--- Message 3: ToolMessage ---
Content: ì„œìš¸

--- Message 4: AIMessage ---
Tool Calls: [{'name': 'get_weather_for_location', 'args': {'city': 'ì„œìš¸'}, 'id': 'call_def456'}]

--- Message 5: ToolMessage ---
Content: ë§‘ìŒ, 22Â°C, ìŠµë„ 60%

--- Message 6: AIMessage ---
Content: ì„œìš¸ì€ ì •ë§ 'í™”ì°½'í•œ ë‚ ì”¨ë„¤ìš”! íƒœì–‘ì´ 'ë¹›-ë‚˜'ê²Œ ì›ƒê³  ìˆë‹µë‹ˆë‹¤!
```

**ë¶„ì„**:
1. **Message 1-2**: ì‚¬ìš©ì ì…ë ¥ â†’ Agentê°€ ìœ„ì¹˜ íŒŒì•… í•„ìš”ì„± ì¸ì§€
2. **Message 3**: ë„êµ¬ ì‹¤í–‰ ê²°ê³¼: "ì„œìš¸"
3. **Message 4**: ì„œìš¸ì˜ ë‚ ì”¨ ì¡°íšŒ ê²°ì •
4. **Message 5**: ë„êµ¬ ì‹¤í–‰ ê²°ê³¼: ë‚ ì”¨ ì •ë³´
5. **Message 6**: ìµœì¢… ë‹µë³€ ìƒì„± (ë§ì¥ë‚œ í¬í•¨)

**ì£¼ìš” íŠ¹ì§•**:
- **ì§€ëŠ¥ì ì¸ ì˜ì‚¬ê²°ì •**: "ë°–ì—"ë¼ëŠ” ëª¨í˜¸í•œ í‘œí˜„ì„ ì´í•´í•˜ê³  ìœ„ì¹˜ ë„êµ¬ ì‚¬ìš©
- **ìˆœì°¨ì  ë„êµ¬ ì‚¬ìš©**: ìœ„ì¹˜ íŒŒì•… â†’ ë‚ ì”¨ ì¡°íšŒ ìˆœì„œë¡œ ë…¼ë¦¬ì  ì§„í–‰
- **ì»¨í…ìŠ¤íŠ¸ í™œìš©**: user_idë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œì¸í™”ëœ ìœ„ì¹˜ ì •ë³´ ì œê³µ
- **êµ¬ì¡°í™”ëœ ì¶œë ¥**: ResponseFormatì„ í†µí•´ ì¼ê´€ëœ í˜•ì‹ì˜ ì‘ë‹µ

---

## 3. ReAct íŒ¨í„´

### 3.1 ReActë€?

**ReAct**(Reasoning + Acting)ëŠ” AI Agentê°€ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” í•µì‹¬ íŒ¨í„´ì…ë‹ˆë‹¤. LLMì´ ì¶”ë¡ (Reasoning)ê³¼ í–‰ë™(Acting)ì„ ë²ˆê°ˆì•„ê°€ë©° ë°˜ë³µí•˜ì—¬ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤.

```mermaid
graph TD
    Start([ë¬¸ì œ ì œì‹œ]) --> R1[Reasoning 1:<br/>ë¬´ì—‡ì„ ì•Œì•„ì•¼ í•˜ëŠ”ê°€?]
    R1 --> A1[Acting 1:<br/>ë„êµ¬ ì‹¤í–‰]
    A1 --> O1[Observation 1:<br/>ê²°ê³¼ í™•ì¸]
    O1 --> R2[Reasoning 2:<br/>ì¶©ë¶„í•œê°€? ë” í•„ìš”í•œê°€?]
    R2 -->|ë” í•„ìš”| A2[Acting 2:<br/>ì¶”ê°€ ë„êµ¬ ì‹¤í–‰]
    R2 -->|ì¶©ë¶„| F[Final Answer:<br/>ìµœì¢… ë‹µë³€]
    A2 --> O2[Observation 2:<br/>ê²°ê³¼ í™•ì¸]
    O2 --> R3[Reasoning 3:<br/>ì´ì œ ë‹µë³€ ê°€ëŠ¥]
    R3 --> F

    style Start fill:#e3f2fd,stroke:#1565c0
    style R1 fill:#fff3e0,stroke:#e65100
    style R2 fill:#fff3e0,stroke:#e65100
    style R3 fill:#fff3e0,stroke:#e65100
    style A1 fill:#f3e5f5,stroke:#7b1fa2
    style A2 fill:#f3e5f5,stroke:#7b1fa2
    style O1 fill:#e8f5e9,stroke:#2e7d32
    style O2 fill:#e8f5e9,stroke:#2e7d32
    style F fill:#fce4ec,stroke:#c2185b
```

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 178-237 - ReAct íŒ¨í„´ ì„¤ëª…

**ReActì˜ ì¥ì **:
1. **í•´ì„ ê°€ëŠ¥ì„±**: ê° ë‹¨ê³„ì˜ ì¶”ë¡  ê³¼ì •ì„ í™•ì¸ ê°€ëŠ¥
2. **ìœ ì—°ì„±**: ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì— ëŒ€ì‘ ê°€ëŠ¥
3. **íš¨ìœ¨ì„±**: í•„ìš”í•œ ë§Œí¼ë§Œ ë„êµ¬ë¥¼ ì‚¬ìš©
4. **ë””ë²„ê¹… ìš©ì´**: ì–´ëŠ ë‹¨ê³„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ì§€ íŒŒì•… ê°€ëŠ¥

### 3.2 Reasoning (ì¶”ë¡ )

**Reasoning**ì€ Agentê°€ í˜„ì¬ ìƒí™©ì„ ë¶„ì„í•˜ê³  ë‹¤ìŒì— ë¬´ì—‡ì„ í•´ì•¼ í• ì§€ ê²°ì •í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

**ì¶”ë¡  ê³¼ì •**:
1. **ìƒí™© ë¶„ì„**: í˜„ì¬ê¹Œì§€ì˜ ëŒ€í™”ì™€ ê´€ì°° ê²°ê³¼ ê²€í† 
2. **ëª©í‘œ í™•ì¸**: ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ê²ƒì´ ë¬´ì—‡ì¸ê°€?
3. **ì§€ì‹ í‰ê°€**: í˜„ì¬ ì•Œê³  ìˆëŠ” ì •ë³´ë§Œìœ¼ë¡œ ë‹µë³€ ê°€ëŠ¥í•œê°€?
4. **ì „ëµ ìˆ˜ë¦½**: ë” ì•Œì•„ì•¼ í•œë‹¤ë©´ ì–´ë–¤ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²ƒì¸ê°€?

**ì˜ˆì‹œ**:
```
ì‚¬ìš©ì: "ì„œìš¸ê³¼ ë¶€ì‚° ì¤‘ ì–´ë””ê°€ ë” ë”°ëœ»í•´?"

[Reasoning]
- ëª©í‘œ: ì„œìš¸ê³¼ ë¶€ì‚°ì˜ ì˜¨ë„ë¥¼ ë¹„êµí•˜ì—¬ ë‹µë³€
- í˜„ì¬ ì§€ì‹: ì—†ìŒ (ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ í•„ìš”)
- í•„ìš”í•œ ì •ë³´: ì„œìš¸ì˜ ì˜¨ë„, ë¶€ì‚°ì˜ ì˜¨ë„
- ì „ëµ: get_weatherë¥¼ ë‘ ë²ˆ í˜¸ì¶œ (ì„œìš¸, ë¶€ì‚°)
```

**ì¢‹ì€ ì¶”ë¡ ì˜ íŠ¹ì§•**:
- **êµ¬ì²´ì **: "ë‚ ì”¨ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤" (X) â†’ "ì„œìš¸ê³¼ ë¶€ì‚°ì˜ í˜„ì¬ ê¸°ì˜¨ì´ í•„ìš”í•˜ë‹¤" (O)
- **ë…¼ë¦¬ì **: ë‹¨ê³„ì ìœ¼ë¡œ ìƒê°í•˜ì—¬ ì˜¬ë°”ë¥¸ ë„êµ¬ ì„ íƒ
- **íš¨ìœ¨ì **: ë¶ˆí•„ìš”í•œ ë„êµ¬ í˜¸ì¶œ ìµœì†Œí™”

### 3.3 Acting (í–‰ë™)

**Acting**ì€ ì¶”ë¡  ê²°ê³¼ì— ë”°ë¼ ì‹¤ì œë¡œ ë„êµ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

**í–‰ë™ì˜ ìœ í˜•**:
1. **ë‹¨ì¼ ë„êµ¬ í˜¸ì¶œ**: í•œ ë²ˆì— í•˜ë‚˜ì˜ ë„êµ¬ë§Œ ì‚¬ìš©
2. **ë³‘ë ¬ ë„êµ¬ í˜¸ì¶œ**: ì—¬ëŸ¬ ë„êµ¬ë¥¼ ë™ì‹œì— ì‹¤í–‰ (ë…ë¦½ì ì¸ ê²½ìš°)
3. **ìˆœì°¨ ë„êµ¬ í˜¸ì¶œ**: ì´ì „ ë„êµ¬ì˜ ê²°ê³¼ê°€ ë‹¤ìŒ ë„êµ¬ì˜ ì…ë ¥ì´ ë˜ëŠ” ê²½ìš°

**ì˜ˆì‹œ - ë³‘ë ¬ ì‹¤í–‰**:
```python
# Agentì˜ ë‚´ë¶€ ë™ì‘
tool_calls = [
    {"name": "get_weather", "args": {"city": "ì„œìš¸"}},
    {"name": "get_weather", "args": {"city": "ë¶€ì‚°"}},
]
# â†’ ë‘ í˜¸ì¶œì€ ë…ë¦½ì ì´ë¯€ë¡œ ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥
```

**ì˜ˆì‹œ - ìˆœì°¨ ì‹¤í–‰**:
```python
# Agentì˜ ë‚´ë¶€ ë™ì‘
# Step 1
tool_calls = [{"name": "get_user_location", "args": {}}]
# Result: "ì„œìš¸"

# Step 2 (Step 1 ê²°ê³¼ ì‚¬ìš©)
tool_calls = [{"name": "get_weather", "args": {"city": "ì„œìš¸"}}]
# Result: "ë§‘ìŒ, 22Â°C"
```

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 102-108 - ë„êµ¬ì˜ ë³‘ë ¬ ë° ìˆœì°¨ ì‹¤í–‰

### 3.4 Observation (ê´€ì°°)

**Observation**ì€ ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ì´ë¥¼ ë‹¤ìŒ ì¶”ë¡ ì— í™œìš©í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

**ê´€ì°° ê³¼ì •**:
1. **ê²°ê³¼ ìˆ˜ì‹ **: ë„êµ¬ê°€ ë°˜í™˜í•œ ê°’ í™•ì¸
2. **ê²°ê³¼ í•´ì„**: ë°˜í™˜ê°’ì´ ì˜ë¯¸í•˜ëŠ” ë°” ì´í•´
3. **ìƒíƒœ ì—…ë°ì´íŠ¸**: ìƒˆë¡œìš´ ì •ë³´ë¥¼ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€
4. **ë‹¤ìŒ ë‹¨ê³„ ê²°ì •**: ì¶©ë¶„í•œê°€? ë” í•„ìš”í•œê°€?

**ì˜ˆì‹œ**:
```
[Acting] get_weather(city="ì„œìš¸") í˜¸ì¶œ
[Observation] ê²°ê³¼: "ë§‘ìŒ, 22Â°C, ìŠµë„ 60%"

[Reasoning]
- ì„œìš¸ ë‚ ì”¨ëŠ” í™•ì¸í–ˆìŒ: ë§‘ê³  22ë„
- ë¶€ì‚° ë‚ ì”¨ë„ í•„ìš”í•¨
- ì•„ì§ ë‹µë³€ ë¶ˆê°€, ì¶”ê°€ ë„êµ¬ í˜¸ì¶œ í•„ìš”

[Acting] get_weather(city="ë¶€ì‚°") í˜¸ì¶œ
[Observation] ê²°ê³¼: "íë¦¼, 20Â°C, ìŠµë„ 70%"

[Reasoning]
- ì„œìš¸: 22ë„, ë¶€ì‚°: 20ë„
- ì„œìš¸ì´ 2ë„ ë” ë”°ëœ»í•¨
- ì´ì œ ë‹µë³€ ê°€ëŠ¥

[Final Answer] "ì„œìš¸ì´ ë¶€ì‚°ë³´ë‹¤ 2ë„ ë” ë”°ëœ»í•©ë‹ˆë‹¤. ì„œìš¸ì€ ë§‘ê³  22ë„, ë¶€ì‚°ì€ íë¦¬ê³  20ë„ì…ë‹ˆë‹¤."
```

**ê´€ì°°ì˜ ì¤‘ìš”ì„±**:
- **ì ì‘ì„±**: ì˜ˆìƒê³¼ ë‹¤ë¥¸ ê²°ê³¼ì—ë„ ëŒ€ì‘ ê°€ëŠ¥
- **ì •í™•ì„±**: ì‹¤ì œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€ ìƒì„±
- **ì™„ì „ì„±**: ëª¨ë“  í•„ìš”í•œ ì •ë³´ê°€ ìˆ˜ì§‘ëëŠ”ì§€ í™•ì¸

### 3.5 ReAct íŒ¨í„´ ì˜ˆì œ

ì‹¤ì œ ReAct íŒ¨í„´ì„ ì½”ë“œë¡œ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.

```python
from langchain.agents import create_agent
from langchain.tools import tool
from langchain_openai import ChatOpenAI

# ë„êµ¬ ì •ì˜
@tool
def search_product(query: str) -> str:
    """ì œí’ˆì„ ê²€ìƒ‰í•©ë‹ˆë‹¤."""
    products = {
        "wireless headphones": "ìƒìœ„ 5ê°œ ì œí’ˆ: WH-1000XM5, AirPods Max, ...",
        "laptop": "ìƒìœ„ 5ê°œ ì œí’ˆ: MacBook Pro, Dell XPS, ...",
    }
    return products.get(query, f"'{query}'ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤")

@tool
def check_inventory(product_id: str) -> str:
    """ì œí’ˆ ì¬ê³ ë¥¼ í™•ì¸í•©ë‹ˆë‹¤."""
    inventory = {
        "WH-1000XM5": "ì¬ê³  10ê°œ",
        "AirPods Max": "í’ˆì ˆ",
        "MacBook Pro": "ì¬ê³  5ê°œ",
    }
    return inventory.get(product_id, f"'{product_id}' ì¬ê³  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤")

# Agent ìƒì„±
model = ChatOpenAI(model="gpt-4o-mini", temperature=0)
agent = create_agent(model, tools=[search_product, check_inventory])

# ReAct íŒ¨í„´ ì‹¤í–‰
print("=" * 70)
print("ğŸ“Œ ReAct íŒ¨í„´ ì˜ˆì œ: ì¸ê¸° ë¬´ì„  í—¤ë“œí° ì°¾ê³  ì¬ê³  í™•ì¸")
print("=" * 70)

result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ì§€ê¸ˆ ê°€ì¥ ì¸ê¸°ìˆëŠ” ë¬´ì„  í—¤ë“œí°ì„ ì°¾ì•„ì„œ ì¬ê³ ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì¤˜"
    }]
})

# ReAct ì¶”ë¡  ê³¼ì • ì¶œë ¥
print("\nğŸ” ReAct ì¶”ë¡  ê³¼ì •:\n")
for i, msg in enumerate(result["messages"], 1):
    role = msg.__class__.__name__

    if role == "HumanMessage":
        print(f"ğŸ“¥ Step {i}: ì‚¬ìš©ì ì…ë ¥")
        print(f"   '{msg.content}'\n")

    elif role == "AIMessage":
        if hasattr(msg, "tool_calls") and msg.tool_calls:
            print(f"ğŸ¤” Step {i}: Reasoning + Acting")
            print(f"   ì¶”ë¡ : ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë³´ ìˆ˜ì§‘ í•„ìš”")
            for tc in msg.tool_calls:
                print(f"   í–‰ë™: {tc['name']}({tc['args']})")
            print()
        else:
            print(f"ğŸ’¡ Step {i}: Final Answer")
            print(f"   {msg.content}\n")

    elif role == "ToolMessage":
        print(f"ğŸ‘€ Step {i}: Observation")
        print(f"   ê´€ì°°: {msg.content}\n")

print("=" * 70)
```

**ì˜ˆìƒ ì¶œë ¥**:
```
======================================================================
ğŸ“Œ ReAct íŒ¨í„´ ì˜ˆì œ: ì¸ê¸° ë¬´ì„  í—¤ë“œí° ì°¾ê³  ì¬ê³  í™•ì¸
======================================================================

ğŸ” ReAct ì¶”ë¡  ê³¼ì •:

ğŸ“¥ Step 1: ì‚¬ìš©ì ì…ë ¥
   'ì§€ê¸ˆ ê°€ì¥ ì¸ê¸°ìˆëŠ” ë¬´ì„  í—¤ë“œí°ì„ ì°¾ì•„ì„œ ì¬ê³ ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì¤˜'

ğŸ¤” Step 2: Reasoning + Acting
   ì¶”ë¡ : ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë³´ ìˆ˜ì§‘ í•„ìš”
   í–‰ë™: search_product({'query': 'wireless headphones'})

ğŸ‘€ Step 3: Observation
   ê´€ì°°: ìƒìœ„ 5ê°œ ì œí’ˆ: WH-1000XM5, AirPods Max, ...

ğŸ¤” Step 4: Reasoning + Acting
   ì¶”ë¡ : ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë³´ ìˆ˜ì§‘ í•„ìš”
   í–‰ë™: check_inventory({'product_id': 'WH-1000XM5'})

ğŸ‘€ Step 5: Observation
   ê´€ì°°: ì¬ê³  10ê°œ

ğŸ’¡ Step 6: Final Answer
   í˜„ì¬ ê°€ì¥ ì¸ê¸°ìˆëŠ” ë¬´ì„  í—¤ë“œí°ì€ WH-1000XM5ì´ë©°, ì¬ê³ ëŠ” 10ê°œ ìˆìŠµë‹ˆë‹¤.

======================================================================
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [03_react_pattern.py](../src/part03_first_agent/03_react_pattern.py)
> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 178-237 - ì‹¤ì œ ReAct ì˜ˆì œ

**ReAct íŒ¨í„´ì˜ ì‹¤ì „ í™œìš©**:
1. **ë©€í‹°ìŠ¤í… ê²€ìƒ‰**: ê²€ìƒ‰ â†’ í•„í„°ë§ â†’ ìƒì„¸ ì¡°íšŒ
2. **ë°ì´í„° ë¶„ì„**: ë°ì´í„° ì¡°íšŒ â†’ ê³„ì‚° â†’ ì‹œê°í™”
3. **ì›Œí¬í”Œë¡œìš° ìë™í™”**: ì¡°ê±´ í™•ì¸ â†’ ì‘ì—… ì‹¤í–‰ â†’ ê²°ê³¼ ê²€ì¦
4. **ëŒ€í™”í˜• ë¬¸ì œ í•´ê²°**: ì •ë³´ ìˆ˜ì§‘ â†’ ë¶„ì„ â†’ ì œì•ˆ â†’ í”¼ë“œë°± â†’ ê°œì„ 

---

## 4. System Prompt ì»¤ìŠ¤í„°ë§ˆì´ì§•

### 4.1 System Promptì˜ ì¤‘ìš”ì„±

**System Prompt**ëŠ” Agentì˜ ì •ì²´ì„±, í–‰ë™ ë°©ì‹, ì œì•½ì‚¬í•­ì„ ì •ì˜í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤. ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ System Promptì— ë”°ë¼ Agentì˜ ì„±ê²©ê³¼ ì‘ë‹µ ìŠ¤íƒ€ì¼ì´ ì™„ì „íˆ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

**System Promptê°€ í•˜ëŠ” ì¼**:
1. **ì—­í•  ì •ì˜**: "ë‹¹ì‹ ì€ ~ì…ë‹ˆë‹¤"
2. **ì„±ê²© ë¶€ì—¬**: "ì¹œê·¼í•˜ê²Œ", "ì „ë¬¸ì ìœ¼ë¡œ", "ì¬ì¹˜ìˆê²Œ"
3. **í–‰ë™ ì§€ì¹¨**: "~í•  ë•Œ ~í•˜ì„¸ìš”"
4. **ì œì•½ ì¡°ê±´**: "~í•˜ì§€ ë§ˆì„¸ìš”"
5. **ì¶œë ¥ í˜•ì‹**: "ë‹µë³€ì€ ~í•œ í˜•ì‹ìœ¼ë¡œ"

**ì¢‹ì€ System Promptì˜ íš¨ê³¼**:
- ì¼ê´€ëœ Agent ì„±ê²©
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ í–‰ë™
- ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
- ë¸Œëœë“œ ì•„ì´ë´í‹°í‹° ë°˜ì˜

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 242-283 - System Prompt ìƒì„¸ ê°€ì´ë“œ

### 4.2 ì¢‹ì€ System Prompt ì‘ì„± íŒ

#### Tip 1: ëª…í™•í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ

**ë‚˜ìœ ì˜ˆ**:
```python
system_prompt = "ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” ë¹„ì„œì…ë‹ˆë‹¤."
```
â†’ ë„ˆë¬´ ì¼ë°˜ì ì´ê³ , Agentê°€ ë¬´ì—‡ì„ í•´ì•¼ í• ì§€ ëª¨í˜¸í•¨

**ì¢‹ì€ ì˜ˆ**:
```python
system_prompt = """ë‹¹ì‹ ì€ IT í—¬í”„ë°ìŠ¤í¬ ë¹„ì„œì…ë‹ˆë‹¤.

ì—­í• :
- ì‚¬ìš©ìì˜ ê¸°ìˆ  ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ê³  í•´ê²°ì±…ì„ ì œì‹œí•©ë‹ˆë‹¤
- ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤
- ì „ë¬¸ ìš©ì–´ëŠ” ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…í•©ë‹ˆë‹¤

ì œì•½:
- í™•ì‹¤í•˜ì§€ ì•Šì€ ì •ë³´ëŠ” ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- í•˜ë“œì›¨ì–´ ìˆ˜ë¦¬ëŠ” ì „ë¬¸ê°€ì—ê²Œ ì˜ë¢°í•˜ë„ë¡ ì•ˆë‚´í•©ë‹ˆë‹¤"""
```
â†’ ì—­í• , í–‰ë™ ë°©ì‹, ì œì•½ì´ ëª…í™•í•¨

#### Tip 2: ë„êµ¬ ì‚¬ìš© ì§€ì¹¨ í¬í•¨

```python
system_prompt = """ë‹¹ì‹ ì€ ì—¬í–‰ ë¹„ì„œì…ë‹ˆë‹¤.

ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
1. search_flights(ì¶œë°œì§€, ëª©ì ì§€, ë‚ ì§œ): í•­ê³µí¸ ê²€ìƒ‰
2. check_weather(ë„ì‹œ, ë‚ ì§œ): ë‚ ì”¨ í™•ì¸
3. recommend_hotels(ë„ì‹œ, ì˜ˆì‚°): í˜¸í…” ì¶”ì²œ

ë„êµ¬ ì‚¬ìš© ì‹œ ìœ ì˜ì‚¬í•­:
- í•­ê³µí¸ ê²€ìƒ‰ ì „ì— ì‚¬ìš©ìì˜ ì˜ˆì‚°ì„ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”
- ë‚ ì”¨ëŠ” ì¶œë°œ ì „ë‚ ê³¼ ì—¬í–‰ ê¸°ê°„ì˜ ë‚ ì”¨ë¥¼ ëª¨ë‘ í™•ì¸í•˜ì„¸ìš”
- í˜¸í…”ì€ ì˜ˆì‚°ê³¼ ìœ„ì¹˜ ì„ í˜¸ë„ë¥¼ ê³ ë ¤í•˜ì—¬ ì¶”ì²œí•˜ì„¸ìš”"""
```

#### Tip 3: ì˜ˆì‹œ í¬í•¨ (Few-shot learning)

```python
system_prompt = """ë‹¹ì‹ ì€ ê³ ê° ì§€ì› Agentì…ë‹ˆë‹¤.

ë‹µë³€ ì˜ˆì‹œ:

ì‚¬ìš©ì: "ì£¼ë¬¸ì´ ì•„ì§ ì•ˆ ì™”ì–´ìš”"
Agent: "ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤. ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ë°°ì†¡ ìƒíƒœë¥¼ í™•ì¸í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤."

ì‚¬ìš©ì: "í™˜ë¶ˆí•˜ê³  ì‹¶ì–´ìš”"
Agent: "í™˜ë¶ˆ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ì£¼ë¬¸ ë²ˆí˜¸ì™€ í™˜ë¶ˆ ì‚¬ìœ ë¥¼ ì•Œë ¤ì£¼ì‹œê² ì–´ìš”?"

ìœ„ì™€ ê°™ì´ í•­ìƒ ì¹œì ˆí•˜ê³  í•´ê²°ì±… ì¤‘ì‹¬ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”."""
```

#### Tip 4: ì‘ë‹µ í˜•ì‹ ëª…ì‹œ

```python
system_prompt = """ë‹¹ì‹ ì€ ì˜ë£Œ ìƒë‹´ Agentì…ë‹ˆë‹¤.

ëª¨ë“  ë‹µë³€ì€ ë‹¤ìŒ êµ¬ì¡°ë¥¼ ë”°ë¥´ì„¸ìš”:

1. ì¦ìƒ í™•ì¸: ì‚¬ìš©ìê°€ ì„¤ëª…í•œ ì¦ìƒì„ ìš”ì•½í•©ë‹ˆë‹¤
2. ê°€ëŠ¥í•œ ì›ì¸: ì¼ë°˜ì ì¸ ì›ì¸ 2-3ê°€ì§€ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤
3. ê¶Œì¥ ì¡°ì¹˜: ì§‘ì—ì„œ í•  ìˆ˜ ìˆëŠ” ì¡°ì¹˜ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤
4. ë³‘ì› ë°©ë¬¸: ë³‘ì› ë°©ë¬¸ì´ í•„ìš”í•œ ê²½ìš°ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤

ì£¼ì˜: í™•ì • ì§„ë‹¨ì€ í•˜ì§€ ì•Šìœ¼ë©°, í•­ìƒ ì „ë¬¸ì˜ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤."""
```

#### Tip 5: ì—ëŸ¬ ì²˜ë¦¬ ì§€ì¹¨

```python
system_prompt = """ë‹¹ì‹ ì€ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ Agentì…ë‹ˆë‹¤.

ì—ëŸ¬ ì²˜ë¦¬:
- ì¿¼ë¦¬ê°€ ì‹¤íŒ¨í•˜ë©´: "ì£„ì†¡í•©ë‹ˆë‹¤, ì¿¼ë¦¬ ì‹¤í–‰ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í• ê¹Œìš”?"
- ê²°ê³¼ê°€ ì—†ìœ¼ë©´: "ê²€ìƒ‰ ì¡°ê±´ê³¼ ì¼ì¹˜í•˜ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì‹œê² ì–´ìš”?"
- ê¶Œí•œì´ ì—†ìœ¼ë©´: "í•´ë‹¹ ë°ì´í„°ì— ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”."

ì ˆëŒ€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ì§€ ë§ˆì„¸ìš”."""
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [04_custom_prompt.py](../src/part03_first_agent/04_custom_prompt.py)

### 4.3 ì—­í• (Role) ì •ì˜

ì—­í• ì— ë”°ë¼ Agentì˜ ì„±ê²©ê³¼ ì „ë¬¸ì„±ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

#### ì˜ˆì‹œ 1: ì¹œê·¼í•œ ê°œì¸ ë¹„ì„œ

```python
system_prompt = """ë‹¹ì‹ ì€ ì‚¬ìš©ìì˜ ì¹œí•œ ì¹œêµ¬ê°™ì€ ê°œì¸ ë¹„ì„œì…ë‹ˆë‹¤.

ì„±ê²©:
- ë”°ëœ»í•˜ê³  ë‹¤ì •í•œ ë§íˆ¬
- ì´ëª¨í‹°ì½˜ì„ ì ì ˆíˆ ì‚¬ìš© (ğŸ˜Š, ğŸ‘, âœ¨ ë“±)
- "~í•˜ì‹œê² ì–´ìš”?" ë³´ë‹¤ "~í• ê¹Œìš”?" ê°™ì€ ì¹œê·¼í•œ í‘œí˜„ ì‚¬ìš©

ì˜ˆì‹œ:
"ì˜¤ëŠ˜ ì¼ì • ì•Œë ¤ì¤˜" â†’ "ì˜¤ëŠ˜ ì¼ì • í™•ì¸í•´ë³¼ê²Œìš”! âœ¨"
"""
```

#### ì˜ˆì‹œ 2: ì „ë¬¸ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì–´ì‹œìŠ¤í„´íŠ¸

```python
system_prompt = """ë‹¹ì‹ ì€ ê²½ì˜ì§„ì„ ë³´ì¢Œí•˜ëŠ” ì „ë¬¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

ì„±ê²©:
- ê°„ê²°í•˜ê³  ëª…í™•í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜
- ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì§€ì›
- ì¡´ëŒ“ë§ ì‚¬ìš©, ê²©ì‹ìˆëŠ” í‘œí˜„

ì˜ˆì‹œ:
"ì´ë²ˆ ë¶„ê¸° ì‹¤ì ì€?" â†’ "Q3 ì‹¤ì  ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê² ìŠµë‹ˆë‹¤."
"""
```

#### ì˜ˆì‹œ 3: êµìœ¡ìš© íŠœí„°

```python
system_prompt = """ë‹¹ì‹ ì€ ì¸ë‚´ì‹¬ ë§ì€ í”„ë¡œê·¸ë˜ë° íŠœí„°ì…ë‹ˆë‹¤.

êµìœ¡ ë°©ì‹:
- ê°œë…ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì„¤ëª…
- ë¹„ìœ ì™€ ì˜ˆì‹œë¥¼ ë§ì´ ì‚¬ìš©
- í•™ìƒì´ ìŠ¤ìŠ¤ë¡œ ë‹µì„ ì°¾ë„ë¡ íŒíŠ¸ ì œê³µ
- ì‹¤ìˆ˜ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë°”ë¼ë³´ê¸°

ì˜ˆì‹œ:
"for ë£¨í”„ê°€ ë­ì˜ˆìš”?" â†’ "for ë£¨í”„ëŠ” ê°™ì€ ì‘ì—…ì„ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•  ë•Œ ì‚¬ìš©í•´ìš”.
ë¹µì„ 10ê°œ ë§Œë“ ë‹¤ê³  ìƒê°í•´ë³¼ê¹Œìš”? ë˜‘ê°™ì€ ê³¼ì •ì„ 10ë²ˆ ë°˜ë³µí•˜ëŠ” ê±°ì˜ˆìš”."
"""
```

### 4.4 ì œì•½ì‚¬í•­ ëª…ì‹œ

Agentê°€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒì„ ëª…í™•íˆ ì§€ì •í•©ë‹ˆë‹¤.

```python
system_prompt = """ë‹¹ì‹ ì€ ê¸ˆìœµ ìƒë‹´ Agentì…ë‹ˆë‹¤.

ì—­í• :
- ì¼ë°˜ì ì¸ ê¸ˆìœµ ì •ë³´ ì œê³µ
- ê¸ˆìœµ ìƒí’ˆ ë¹„êµ ë„ì›€
- ì¬ë¬´ ê³„íš ì¡°ì–¸

ì œì•½ì‚¬í•­ (ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ):
1. íŠ¹ì • ì£¼ì‹ì´ë‚˜ ì½”ì¸ì„ ë§¤ìˆ˜/ë§¤ë„í•˜ë¼ê³  ê¶Œìœ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
2. "ì´ê²ƒì„ ì‚¬ë©´ ë°˜ë“œì‹œ ìˆ˜ìµì´ ë‚©ë‹ˆë‹¤" ê°™ì€ ë³´ì¥ì„± ë°œì–¸ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
3. ë¶ˆë²•ì ì¸ ì„¸ê¸ˆ íšŒí”¼ ë°©ë²•ì„ ì œì•ˆí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
4. ì‚¬ìš©ìì˜ ê°œì¸ ì¬ë¬´ ì •ë³´ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê³µìœ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
5. ì „ë¬¸ ê¸ˆìœµ ìë¬¸ì‚¬ì˜ ì—­í• ì„ ëŒ€ì²´í•˜ë ¤ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

ìœ„ ì œì•½ì„ ìœ„ë°˜í•˜ëŠ” ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´:
"ì£„ì†¡í•˜ì§€ë§Œ, ê·¸ëŸ° ì¡°ì–¸ì€ ì œê³µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì „ë¬¸ ê¸ˆìœµ ìë¬¸ì‚¬ì™€ ìƒë‹´í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤."
"""
```

### 4.5 ì˜ˆì œ: ë‹¤ì–‘í•œ í˜ë¥´ì†Œë‚˜

ê°™ì€ ë„êµ¬, ë‹¤ë¥¸ ì„±ê²©ì˜ Agentë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```python
from langchain.agents import create_agent
from langchain_openai import ChatOpenAI
from langchain.tools import tool

@tool
def get_weather(city: str) -> str:
    """ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
    return f"{city}: ë§‘ìŒ, 22Â°C"

model = ChatOpenAI(model="gpt-4o-mini", temperature=0.7)

# í˜ë¥´ì†Œë‚˜ 1: ê¸°ìƒ ìºìŠ¤í„°
forecaster_prompt = """ë‹¹ì‹ ì€ TV ê¸°ìƒ ìºìŠ¤í„°ì…ë‹ˆë‹¤.
ë°ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” í†¤ìœ¼ë¡œ ë‚ ì”¨ë¥¼ ì „ë‹¬í•˜ì„¸ìš”.
"ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤!", "í™œê¸°ì°¬ í•˜ë£¨ ë˜ì„¸ìš”!" ê°™ì€ ì¸ì‚¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”."""

forecaster_agent = create_agent(
    model=model,
    tools=[get_weather],
    system_prompt=forecaster_prompt
)

# í˜ë¥´ì†Œë‚˜ 2: ê³¼í•™ì
scientist_prompt = """ë‹¹ì‹ ì€ ê¸°ìƒí•™ìì…ë‹ˆë‹¤.
ë‚ ì”¨ ë°ì´í„°ë¥¼ ê³¼í•™ì ì´ê³  ì •í™•í•˜ê²Œ ì„¤ëª…í•˜ì„¸ìš”.
ê¸°ì••, ìŠµë„, ê¸°ìƒ í˜„ìƒì˜ ì›ì¸ì„ ì„¤ëª…í•˜ì„¸ìš”."""

scientist_agent = create_agent(
    model=model,
    tools=[get_weather],
    system_prompt=scientist_prompt
)

# í˜ë¥´ì†Œë‚˜ 3: ì‹œì¸
poet_prompt = """ë‹¹ì‹ ì€ ë‚ ì”¨ë¥¼ ì‹œì ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ë‚­ë§Œì ì¸ ì‹œì¸ì…ë‹ˆë‹¤.
ë‚ ì”¨ë¥¼ ì•„ë¦„ë‹¤ìš´ ë¬¸ì¥ê³¼ ë¹„ìœ ë¡œ ë¬˜ì‚¬í•˜ì„¸ìš”.
ìì—°ê³¼ ê³„ì ˆì˜ ì•„ë¦„ë‹¤ì›€ì„ ê°•ì¡°í•˜ì„¸ìš”."""

poet_agent = create_agent(
    model=model,
    tools=[get_weather],
    system_prompt=poet_prompt
)

# í…ŒìŠ¤íŠ¸
question = {"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ ì•Œë ¤ì¤˜"}]}

print("ğŸ¤ ê¸°ìƒ ìºìŠ¤í„°:")
print(forecaster_agent.invoke(question)["messages"][-1].content)

print("\nğŸ”¬ ê¸°ìƒí•™ì:")
print(scientist_agent.invoke(question)["messages"][-1].content)

print("\nğŸ“ ì‹œì¸:")
print(poet_agent.invoke(question)["messages"][-1].content)
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ğŸ¤ ê¸°ìƒ ìºìŠ¤í„°:
ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤! ì„œìš¸ì˜ ë‚ ì”¨ë¥¼ ì•Œë ¤ë“œë¦´ê²Œìš”! ì˜¤ëŠ˜ ì„œìš¸ì€ í™”ì°½í•œ ë§‘ì€ ë‚ ì”¨ì…ë‹ˆë‹¤!
ê¸°ì˜¨ì€ 22ë„ë¡œ ì•¼ì™¸ í™œë™í•˜ê¸° ë”± ì¢‹ì€ ë‚ ì”¨ë„¤ìš”! í™œê¸°ì°¬ í•˜ë£¨ ë˜ì„¸ìš”! ğŸ˜Š

ğŸ”¬ ê¸°ìƒí•™ì:
ì„œìš¸ì˜ í˜„ì¬ ê¸°ìƒ ìƒíƒœëŠ” ì²­ëª…(Clear)ì…ë‹ˆë‹¤. ê¸°ì˜¨ì€ ì„­ì”¨ 22ë„ë¥¼ ê¸°ë¡í•˜ê³  ìˆìœ¼ë©°,
ì´ëŠ” í‰ë…„ ëŒ€ë¹„ ì •ìƒ ë²”ìœ„ì— í•´ë‹¹í•©ë‹ˆë‹¤. ê³ ê¸°ì••ì˜ ì˜í–¥ìœ¼ë¡œ êµ¬ë¦„ì´ ì ê³  ì¼ì¡°ëŸ‰ì´
í’ë¶€í•œ ìƒíƒœì…ë‹ˆë‹¤.

ğŸ“ ì‹œì¸:
ì„œìš¸ì˜ í•˜ëŠ˜ì€ ì˜¤ëŠ˜ ë§‘ì€ ìˆ˜ì •ì²˜ëŸ¼ íˆ¬ëª…í•˜ê³ , ë”°ìŠ¤í•œ 22ë„ì˜ ë´„ê¸°ìš´ì´
ë„ì‹œë¥¼ ê°ì‹¸ ì•ˆê³  ìˆìŠµë‹ˆë‹¤. í–‡ì‚´ì€ ê¸ˆë¹› ì‹¤ì²˜ëŸ¼ ê±°ë¦¬ë¥¼ ìˆ˜ë†“ê³ ,
ë°”ëŒì€ ë¶€ë“œëŸ¬ìš´ ì†ì‚­ì„ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì¶•ë³µí•©ë‹ˆë‹¤.
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [04_custom_prompt.py](../src/part03_first_agent/04_custom_prompt.py) ë¼ì¸ 150-220

---

## 5. Streaming Agent

### 5.1 Streamingì´ë€?

**Streaming**ì€ Agentì˜ ì‘ë‹µì„ ì „ë¶€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ìƒì„±ë˜ëŠ” ëŒ€ë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°›ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. íŠ¹íˆ ë³µì¡í•œ AgentëŠ” ì—¬ëŸ¬ ë„êµ¬ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë¯€ë¡œ Streamingìœ¼ë¡œ ì¤‘ê°„ ê³¼ì •ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì‚¬ìš©ì ê²½í—˜ì— ì¤‘ìš”í•©ë‹ˆë‹¤.

**Streamingì˜ ì¥ì **:
1. **ë¹ ë¥¸ í”¼ë“œë°±**: ì‚¬ìš©ìê°€ ë°”ë¡œ ì‘ë‹µì„ ë³´ê¸° ì‹œì‘í•¨
2. **ì§„í–‰ ìƒí™© í‘œì‹œ**: Agentê°€ ë©ˆì¶˜ ê²ƒì´ ì•„ë‹ˆë¼ ì‘ì—… ì¤‘ì„ì„ ì•Œ ìˆ˜ ìˆìŒ
3. **ê¸´ ì‘ë‹µ ì²˜ë¦¬**: ê¸´ ë‹µë³€ë„ ëŠê¹€ ì—†ì´ í‘œì‹œ
4. **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: ëŒ€ê¸° ì‹œê°„ì´ ì²´ê°ìƒ ì§§ì•„ì§

**Streaming vs Non-streaming**:
```
[Non-streaming]
ì‚¬ìš©ì: "ì„œìš¸ê³¼ ë¶€ì‚° ë‚ ì”¨ ë¹„êµí•´ì¤˜"
...5ì´ˆ ëŒ€ê¸°...
Agent: "ì„œìš¸ì€ ë§‘ê³  22ë„, ë¶€ì‚°ì€ íë¦¬ê³  20ë„ì…ë‹ˆë‹¤. ì„œìš¸ì´ ë” ë”°ëœ»í•©ë‹ˆë‹¤."

[Streaming]
ì‚¬ìš©ì: "ì„œìš¸ê³¼ ë¶€ì‚° ë‚ ì”¨ ë¹„êµí•´ì¤˜"
Agent: "ë‚ ì”¨ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤..."
Agent: [ë„êµ¬ í˜¸ì¶œ] get_weather(ì„œìš¸)
Agent: [ë„êµ¬ ê²°ê³¼] ì„œìš¸: ë§‘ìŒ, 22ë„
Agent: [ë„êµ¬ í˜¸ì¶œ] get_weather(ë¶€ì‚°)
Agent: [ë„êµ¬ ê²°ê³¼] ë¶€ì‚°: íë¦¼, 20ë„
Agent: "ì„œìš¸ì€ ë§‘ê³  22ë„, ë¶€ì‚°ì€ íë¦¬ê³  20ë„ì…ë‹ˆë‹¤. ì„œìš¸ì´ ë” ë”°ëœ»í•©ë‹ˆë‹¤."
```

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [06-agents.md](../official/06-agents_ko.md) ë¼ì¸ 461-476 - Streaming ê°€ì´ë“œ

### 5.2 stream() vs invoke()

`invoke()`ì™€ `stream()`ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.

#### invoke(): ì™„ë£Œ í›„ ë°˜í™˜

```python
result = agent.invoke({
    "messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]
})
# â†’ Agentê°€ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí•œ í›„ ìµœì¢… ê²°ê³¼ë§Œ ë°˜í™˜
print(result["messages"][-1].content)
```

#### stream(): ì‹¤ì‹œê°„ ë°˜í™˜

```python
for chunk in agent.stream({
    "messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]
}):
    # â†’ Agentê°€ ì‘ì—…í•˜ëŠ” ë™ì•ˆ ì¤‘ê°„ ìƒíƒœë¥¼ ê³„ì† ë°˜í™˜
    print(chunk)
```

**ë¹„êµí‘œ**:

| íŠ¹ì§• | invoke() | stream() |
|------|----------|----------|
| **ë°˜í™˜ ì‹œì ** | ì™„ë£Œ í›„ í•œ ë²ˆ | ì§„í–‰ ì¤‘ ì—¬ëŸ¬ ë²ˆ |
| **ì¤‘ê°„ ìƒíƒœ** | ë³¼ ìˆ˜ ì—†ìŒ | ì‹¤ì‹œê°„ í™•ì¸ ê°€ëŠ¥ |
| **ì‚¬ìš©ì ê²½í—˜** | ëŒ€ê¸° ì‹œê°„ ê¹€ | ì¦‰ê°ì ì¸ í”¼ë“œë°± |
| **êµ¬í˜„ ë³µì¡ë„** | ê°„ë‹¨ | ì•½ê°„ ë³µì¡ |
| **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤** | ë°°ì¹˜ ì²˜ë¦¬, API | ëŒ€í™”í˜• UI, ì±—ë´‡ |

### 5.3 Streaming ëª¨ë“œ (messages, updates, values)

`stream()` ë©”ì„œë“œëŠ” `stream_mode` íŒŒë¼ë¯¸í„°ë¡œ ë‹¤ì–‘í•œ ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

#### ëª¨ë“œ 1: "values" (ê¸°ë³¸)

ì „ì²´ ìƒíƒœë¥¼ ë§¤ë²ˆ ë°˜í™˜í•©ë‹ˆë‹¤.

```python
for chunk in agent.stream(
    {"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]},
    stream_mode="values"  # ê¸°ë³¸ê°’
):
    # chunkëŠ” ë§¤ë²ˆ ì „ì²´ ìƒíƒœ ({"messages": [...], ...})
    latest_message = chunk["messages"][-1]
    print(f"ìµœì‹  ë©”ì‹œì§€: {latest_message}")
```

**ì¥ì **: ì „ì²´ ì»¨í…ìŠ¤íŠ¸ë¥¼ í•­ìƒ í™•ì¸ ê°€ëŠ¥
**ë‹¨ì **: ì¤‘ë³µ ë°ì´í„°ê°€ ë§ìŒ (ëª¨ë“  ì´ì „ ë©”ì‹œì§€ í¬í•¨)

#### ëª¨ë“œ 2: "updates"

ê° ë‹¨ê³„ì˜ ë³€ê²½ì‚¬í•­ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.

```python
for chunk in agent.stream(
    {"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]},
    stream_mode="updates"
):
    # chunkëŠ” ì´ë²ˆ ë‹¨ê³„ì—ì„œ ì¶”ê°€ëœ ë‚´ìš©ë§Œ
    print(f"ì—…ë°ì´íŠ¸: {chunk}")
```

**ì¥ì **: ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì ˆì•½, íš¨ìœ¨ì 
**ë‹¨ì **: ì „ì²´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ê´€ë¦¬í•´ì•¼ í•¨

#### ëª¨ë“œ 3: "messages"

ë©”ì‹œì§€ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.

```python
for chunk in agent.stream(
    {"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]},
    stream_mode="messages"
):
    # chunkëŠ” ë©”ì‹œì§€ ê°ì²´
    if hasattr(chunk, "content"):
        print(chunk.content, end="", flush=True)
```

**ì¥ì **: UIì— ì§ì ‘ í‘œì‹œí•˜ê¸° ì‰¬ì›€
**ë‹¨ì **: ë©”ì‹œì§€ ì™¸ ìƒíƒœëŠ” ë³¼ ìˆ˜ ì—†ìŒ

> ğŸ“– **ê³µì‹ ë¬¸ì„œ**: [ìŠ¤íŠ¸ë¦¬ë° ê°œìš”](../official/11-streaming-overview_ko.md) - ìƒì„¸í•œ ìŠ¤íŠ¸ë¦¬ë° ê°€ì´ë“œ

### 5.4 ì‹¤ì‹œê°„ ì‘ë‹µ êµ¬í˜„

ì‹¤ì œ ì±—ë´‡ì²˜ëŸ¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ë‹µí•˜ëŠ” Agentë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```python
from langchain.agents import create_agent
from langchain_openai import ChatOpenAI
from langchain.tools import tool
import time

@tool
def get_weather(city: str) -> str:
    """ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
    time.sleep(1)  # API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
    return f"{city}: ë§‘ìŒ, 22Â°C, ìŠµë„ 60%"

@tool
def get_forecast(city: str, days: int = 3) -> str:
    """ë©°ì¹ ê°„ì˜ ë‚ ì”¨ ì˜ˆë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
    time.sleep(1.5)  # API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
    return f"{city}ì˜ {days}ì¼ ì˜ˆë³´: ë§‘ìŒ â†’ íë¦¼ â†’ ë¹„"

# Agent ìƒì„±
model = ChatOpenAI(model="gpt-4o-mini", temperature=0)
agent = create_agent(
    model=model,
    tools=[get_weather, get_forecast],
    system_prompt="ë‹¹ì‹ ì€ ì¹œì ˆí•œ ë‚ ì”¨ ì•ˆë‚´ Agentì…ë‹ˆë‹¤."
)

# ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°
print("ğŸ¤– ë‚ ì”¨ Agent (ì‹¤ì‹œê°„ ëª¨ë“œ)\n")
print("ğŸ‘¤ ì‚¬ìš©ì: ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ì™€ 3ì¼ ì˜ˆë³´ë¥¼ ì•Œë ¤ì¤˜\n")
print("ğŸ¤– Agent: ", end="", flush=True)

for chunk in agent.stream(
    {"messages": [{"role": "user", "content": "ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ì™€ 3ì¼ ì˜ˆë³´ë¥¼ ì•Œë ¤ì¤˜"}]},
    stream_mode="values"
):
    latest_message = chunk["messages"][-1]

    # ë„êµ¬ í˜¸ì¶œ í‘œì‹œ
    if hasattr(latest_message, "tool_calls") and latest_message.tool_calls:
        for tool_call in latest_message.tool_calls:
            print(f"\n   [ë„êµ¬ í˜¸ì¶œ] {tool_call['name']}({tool_call['args']})", flush=True)

    # ë„êµ¬ ê²°ê³¼ í‘œì‹œ
    elif latest_message.__class__.__name__ == "ToolMessage":
        print(f"\n   [ë„êµ¬ ê²°ê³¼] {latest_message.content}", flush=True)

    # ìµœì¢… ë‹µë³€ í‘œì‹œ (ìŠ¤íŠ¸ë¦¬ë°)
    elif hasattr(latest_message, "content") and latest_message.content:
        # ì´ë¯¸ ì¶œë ¥í•œ ë‚´ìš©ì€ ì œì™¸í•˜ê³  ìƒˆë¡œìš´ ë¶€ë¶„ë§Œ ì¶œë ¥
        # (ì‹¤ì œë¡œëŠ” í† í° ë‹¨ìœ„ ìŠ¤íŠ¸ë¦¬ë°ì„ ìœ„í•´ ë” ë³µì¡í•œ ë¡œì§ í•„ìš”)
        if not hasattr(agent, "_last_content"):
            agent._last_content = ""

        new_content = latest_message.content[len(agent._last_content):]
        if new_content:
            print(new_content, end="", flush=True)
            agent._last_content = latest_message.content

print("\n")
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ğŸ¤– ë‚ ì”¨ Agent (ì‹¤ì‹œê°„ ëª¨ë“œ)

ğŸ‘¤ ì‚¬ìš©ì: ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ì™€ 3ì¼ ì˜ˆë³´ë¥¼ ì•Œë ¤ì¤˜

ğŸ¤– Agent:
   [ë„êµ¬ í˜¸ì¶œ] get_weather({'city': 'ì„œìš¸'})
   [ë„êµ¬ ê²°ê³¼] ì„œìš¸: ë§‘ìŒ, 22Â°C, ìŠµë„ 60%
   [ë„êµ¬ í˜¸ì¶œ] get_forecast({'city': 'ì„œìš¸', 'days': 3})
   [ë„êµ¬ ê²°ê³¼] ì„œìš¸ì˜ 3ì¼ ì˜ˆë³´: ë§‘ìŒ â†’ íë¦¼ â†’ ë¹„

ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ëŠ” ë§‘ê³  ê¸°ì˜¨ì€ 22ë„, ìŠµë„ëŠ” 60%ì…ë‹ˆë‹¤.
ì•ìœ¼ë¡œ 3ì¼ê°„ì˜ ë‚ ì”¨ëŠ” ì˜¤ëŠ˜ì€ ë§‘ê³ , ë‚´ì¼ì€ íë¦¬ë©°, ëª¨ë ˆëŠ” ë¹„ê°€ ì˜¬ ì˜ˆì •ì…ë‹ˆë‹¤.
```

#### ê³ ê¸‰: í† í° ë‹¨ìœ„ ìŠ¤íŠ¸ë¦¬ë°

ë” ë¶€ë“œëŸ¬ìš´ ìŠ¤íŠ¸ë¦¬ë°ì„ ìœ„í•´ í† í° ë‹¨ìœ„ë¡œ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
async def stream_agent_response(agent, question):
    """í† í° ë‹¨ìœ„ë¡œ Agent ì‘ë‹µì„ ìŠ¤íŠ¸ë¦¬ë°í•©ë‹ˆë‹¤."""
    print("ğŸ¤– Agent: ", end="", flush=True)

    async for event in agent.astream_events(
        {"messages": [{"role": "user", "content": question}]},
        version="v1"
    ):
        kind = event["event"]

        # ë„êµ¬ í˜¸ì¶œ ì‹œì‘
        if kind == "on_chat_model_start":
            print("\n   [ìƒê° ì¤‘...]", end="", flush=True)

        # ë„êµ¬ ì‹¤í–‰
        elif kind == "on_tool_start":
            tool_name = event["name"]
            print(f"\n   [ë„êµ¬ ì‹¤í–‰: {tool_name}]", end="", flush=True)

        # ìµœì¢… ë‹µë³€ í† í°
        elif kind == "on_chat_model_stream":
            content = event["data"]["chunk"].content
            if content:
                print(content, end="", flush=True)

    print("\n")

# ì‚¬ìš©
import asyncio
asyncio.run(stream_agent_response(agent, "ì„œìš¸ ë‚ ì”¨ëŠ”?"))
```

> ğŸ’» **ì˜ˆì œ ì½”ë“œ**: [05_streaming_agent.py](../src/part03_first_agent/05_streaming_agent.py)
>
> **ğŸ’¡ ì‹¤ìŠµ í¬ì¸íŠ¸**:
> 1. `stream_mode="values"`ì™€ `stream_mode="updates"`ì˜ ì°¨ì´ë¥¼ ì§ì ‘ ë¹„êµí•´ë³´ì„¸ìš”
> 2. `time.sleep()`ì„ ì¡°ì •í•˜ì—¬ ë„êµ¬ í˜¸ì¶œ ì†ë„ë¥¼ ë³€ê²½í•˜ê³  ìŠ¤íŠ¸ë¦¬ë° íš¨ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”
> 3. ì›¹ UI(Streamlit ë“±)ì™€ ì—°ë™í•˜ì—¬ ì‹¤ì‹œê°„ ì±—ë´‡ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”

---

### 5.5 Content Blocksì™€ Reasoning Output

#### 5.5.1 Content Blocks ê°œìš”

**Content Blocks**ëŠ” AI ì‘ë‹µì˜ êµ¬ì¡°í™”ëœ í‘œí˜„ì…ë‹ˆë‹¤.

**ì§€ì›í•˜ëŠ” ëª¨ë¸**:
- **Claude (Anthropic)**: Thinking blocks
- **GPT-4o (OpenAI)**: Reasoning tokens
- **Gemini 2.5 (Google)**: Thought blocks

#### 5.5.2 Reasoning Outputì´ë€?

ì¼ë¶€ ëª¨ë¸ì€ **ìµœì¢… ë‹µë³€ ì „ì— ì¶”ë¡  ê³¼ì •**ì„ ì¶œë ¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë¸ì˜ ì‚¬ê³  ê³¼ì •ì„ ì´í•´í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Claude Thinking Blocks ì˜ˆì œ**:

```python
from langchain_anthropic import ChatAnthropic

model = ChatAnthropic(
    model="claude-opus-4-20250514",
    extended_thinking=True  # Thinking í™œì„±í™”
)

response = model.invoke([
    {"role": "user", "content": "25 * 47ì€?"}
])

print(response.content)
# ì¶œë ¥:
# [ThinkingBlock(text="Let me calculate... 25 * 47 = 25 * (50 - 3) = 1250 - 75 = 1175")]
# [TextBlock(text="1,175ì…ë‹ˆë‹¤.")]
```

#### 5.5.3 Content Blocks êµ¬ì¡°

**AIMessage.content vs AIMessage.content_blocks**:

```python
# .content: ë‹¨ìˆœ ë¬¸ìì—´ (í•˜ìœ„ í˜¸í™˜)
print(response.content)
# "1,175ì…ë‹ˆë‹¤."

# .content_blocks: êµ¬ì¡°í™”ëœ ë¦¬ìŠ¤íŠ¸
for block in response.content_blocks:
    if block.type == "thinking":
        print(f"[ì¶”ë¡ ]: {block.text}")
    elif block.type == "text":
        print(f"[ë‹µë³€]: {block.text}")
```

**ì¶œë ¥**:
```
[ì¶”ë¡ ]: Let me calculate... 25 * 47 = 25 * (50 - 3) = 1250 - 75 = 1175
[ë‹µë³€]: 1,175ì…ë‹ˆë‹¤.
```

#### 5.5.4 Thinking Blocks í™œìš© ì‚¬ë¡€

**1. ë””ë²„ê¹… ë° ì¶”ì **:

Agentì˜ ì¶”ë¡  ê³¼ì •ì„ ë¡œê¹…í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
from langchain.middleware import after_model

@after_model
def log_thinking(request):
    """ëª¨ë¸ì˜ ì¶”ë¡  ê³¼ì •ì„ ë¡œê¹…í•©ë‹ˆë‹¤."""
    for block in request.response.content_blocks:
        if block.type == "thinking":
            logger.info(f"Model reasoning: {block.text}")

agent = create_agent(
    model=model,
    tools=[...],
    middleware=[log_thinking]
)
```

**2. ì¶”ë¡  ê³¼ì • ì‚¬ìš©ìì—ê²Œ í‘œì‹œ**:

ì‚¬ìš©ìì—ê²Œ Agentê°€ ì–´ë–»ê²Œ ìƒê°í•˜ëŠ”ì§€ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
for chunk in agent.stream({"messages": [{"role": "user", "content": "ì„œìš¸ ë‚ ì”¨ëŠ”?"}]}):
    message = chunk["messages"][-1]

    if hasattr(message, "content_blocks"):
        for block in message.content_blocks:
            if block.type == "thinking":
                print(f"ğŸ¤” ìƒê° ì¤‘: {block.text}")
            elif block.type == "text":
                print(f"ğŸ’¬ ë‹µë³€: {block.text}")
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ğŸ¤” ìƒê° ì¤‘: ì‚¬ìš©ìê°€ ì„œìš¸ ë‚ ì”¨ë¥¼ ë¬¼ì–´ë´¤ìœ¼ë‹ˆ get_weather ë„êµ¬ë¥¼ í˜¸ì¶œí•´ì•¼ê² ë‹¤.
ğŸ’¬ ë‹µë³€: ì„œìš¸ì˜ ë‚ ì”¨ë¥¼ ì¡°íšŒí•˜ê² ìŠµë‹ˆë‹¤.
ğŸ¤” ìƒê° ì¤‘: ë„êµ¬ ê²°ê³¼ë¥¼ ë°›ì•˜ìœ¼ë‹ˆ ì´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì„¤ëª…í•´ì£¼ì.
ğŸ’¬ ë‹µë³€: ì„œìš¸ì€ í˜„ì¬ ë§‘ê³  22ë„ì…ë‹ˆë‹¤.
```

**3. Thinking ë¹„ìš© ìµœì í™”**:

Extended thinkingì€ ë¹„ìš©ì´ ë†’ìŠµë‹ˆë‹¤:
- **Regular tokens**: $3 / 1M input
- **Thinking tokens**: $9 / 1M input (3ë°°)

**ê¶Œì¥ ì‚¬í•­**:
- ë³µì¡í•œ ë¬¸ì œ (ìˆ˜í•™, ë…¼ë¦¬ í¼ì¦): `extended_thinking=True`
- ë‹¨ìˆœí•œ ì§ˆë¬¸ (ì¸ì‚¬, ê°„ë‹¨í•œ ì¡°íšŒ): `extended_thinking=False`

```python
# ìƒí™©ë³„ ëª¨ë¸ ì„ íƒ
def get_model(question_complexity: str):
    if question_complexity == "complex":
        return ChatAnthropic(
            model="claude-opus-4-20250514",
            extended_thinking=True
        )
    else:
        return ChatAnthropic(
            model="claude-sonnet-4-20250514",
            extended_thinking=False  # ê¸°ë³¸ê°’
        )
```

#### 5.5.5 Caching Thinking Blocks (Anthropic)

System messageì— thinking ì§€ì¹¨ì„ ìºì‹±í•˜ë©´ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
from anthropic.types import SystemMessage

system_msg = SystemMessage(
    content=[
        {
            "type": "text",
            "text": "You are a helpful math tutor. Always show your work."
        },
        {
            "type": "text",
            "text": "Think step by step before answering.",
            "cache_control": {"type": "ephemeral"}  # ìºì‹±
        }
    ]
)

model = ChatAnthropic(
    model="claude-opus-4-20250514",
    extended_thinking=True
)

agent = create_agent(
    model=model,
    system_prompt=system_msg,
    tools=[...]
)
```

**ë¹„ìš© ì ˆê°**: ë°˜ë³µ ìš”ì²­ ì‹œ ìºì‹œ íˆíŠ¸ë¡œ 90% ë¹„ìš© ì ˆê° ê°€ëŠ¥

#### 5.5.6 ëª¨ë¸ë³„ Reasoning ì§€ì›

| ëª¨ë¸ | Reasoning ì§€ì› | Block íƒ€ì… | í™œì„±í™” ë°©ë²• |
|------|---------------|-----------|-----------|
| Claude Opus 4 | âœ… | `thinking` | `extended_thinking=True` |
| GPT-4o | âœ… | `reasoning` | (ìë™) |
| Gemini 2.5 | âœ… | `thought` | `think_mode=True` |
| GPT-4o-mini | âŒ | - | - |
| Claude Sonnet | âŒ | - | - |

**ì˜ˆì œ: GPT-4o Reasoning**:

```python
from langchain_openai import ChatOpenAI

model = ChatOpenAI(model="gpt-4o")
response = model.invoke([
    {"role": "user", "content": "3x + 5 = 20ì„ í’€ì–´ì¤˜"}
])

for block in response.content_blocks:
    if block.type == "reasoning":
        print(f"[ì¶”ë¡ ]: {block.text}")
    elif block.type == "text":
        print(f"[ë‹µë³€]: {block.text}")
```

#### 5.5.7 ì£¼ì˜ì‚¬í•­

**1. Thinkingì€ ê·¼ì‚¬ì¹˜**:
- Thinking ë¸”ë¡ì€ ì‹¤ì œ ì¶”ë¡  ê³¼ì •ì˜ **ìš”ì•½**ì…ë‹ˆë‹¤.
- ëª¨ë¸ì´ "ìƒê°í•˜ëŠ” ì²™" í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë‚´ë¶€ ì²˜ë¦¬ ê³¼ì •ì„ ì‚¬ëŒì´ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.
- í•˜ì§€ë§Œ 100% ì •í™•í•œ ì¶”ë¡  ê³¼ì •ì€ ì•„ë‹™ë‹ˆë‹¤.

**2. í† í° ì‚¬ìš©ëŸ‰ í™•ì¸**:

Thinking í† í°ì€ ë³„ë„ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.

```python
response = model.invoke([...])

print(response.usage_metadata)
# {
#   "input_tokens": 50,
#   "output_tokens": 120,
#   "thinking_tokens": 450,  # ì¶”ê°€ ë¹„ìš©
#   "total_tokens": 620
# }
```

**3. Streaming ì§€ì›**:

Thinkingë„ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```python
for chunk in agent.stream(input, stream_mode="messages"):
    for block in chunk.content_blocks:
        if block.type == "thinking":
            print(f"ğŸ¤” {block.text}", end="", flush=True)
```

ì´ë¥¼ í†µí•´ UIì—ì„œ ì¶”ë¡  ê³¼ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**4. Content Blocksì™€ Tool Callsì˜ ì°¨ì´**:

- **Content Blocks**: ëª¨ë¸ì˜ í…ìŠ¤íŠ¸ ì‘ë‹µ êµ¬ì¡°
  - `thinking`, `text`, `image` ë“±
- **Tool Calls**: Agentì˜ ë„êµ¬ í˜¸ì¶œ
  - `tool_calls` í•„ë“œì— ë³„ë„ë¡œ ì €ì¥

```python
message = response.messages[-1]

# Content blocks
for block in message.content_blocks:
    print(f"Block: {block.type}")

# Tool calls (ë³„ê°œ)
if hasattr(message, "tool_calls"):
    for tc in message.tool_calls:
        print(f"Tool: {tc['name']}")
```

#### 5.5.8 ì‹¤ì „ ì˜ˆì œ: Thinking ê¸°ë°˜ Agent

ë³µì¡í•œ ë¬¸ì œë¥¼ ë‹¨ê³„ë³„ë¡œ í’€ì–´ì£¼ëŠ” Agent:

```python
from langchain_anthropic import ChatAnthropic
from langchain.agents import create_agent
from langchain.tools import tool

@tool
def calculate(expression: str) -> float:
    """ìˆ˜ì‹ì„ ê³„ì‚°í•©ë‹ˆë‹¤."""
    return eval(expression)

model = ChatAnthropic(
    model="claude-opus-4-20250514",
    extended_thinking=True
)

agent = create_agent(
    model=model,
    tools=[calculate],
    system_prompt="ë‹¹ì‹ ì€ ìˆ˜í•™ íŠœí„°ì…ë‹ˆë‹¤. ë¬¸ì œë¥¼ ë‹¨ê³„ë³„ë¡œ í’€ì´í•˜ì„¸ìš”."
)

# Streamingìœ¼ë¡œ ì¶”ë¡  ê³¼ì • í‘œì‹œ
print("ë¬¸ì œ: (25 + 17) * 3 - 10ì€?\n")

for chunk in agent.stream(
    {"messages": [{"role": "user", "content": "(25 + 17) * 3 - 10ì„ ê³„ì‚°í•´ì¤˜"}]},
    stream_mode="messages"
):
    message = chunk[-1]

    if hasattr(message, "content_blocks"):
        for block in message.content_blocks:
            if block.type == "thinking":
                print(f"ğŸ’­ ì¶”ë¡ : {block.text}\n")
            elif block.type == "text":
                print(f"ğŸ“ ì„¤ëª…: {block.text}\n")

    if hasattr(message, "tool_calls") and message.tool_calls:
        for tc in message.tool_calls:
            print(f"ğŸ”§ ë„êµ¬: {tc['name']}({tc['args']})\n")
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ë¬¸ì œ: (25 + 17) * 3 - 10ì€?

ğŸ’­ ì¶”ë¡ : ë¨¼ì € ê´„í˜¸ ì•ˆì„ ê³„ì‚°í•´ì•¼ í•œë‹¤. 25 + 17ì„ ë¨¼ì € ê³„ì‚°í•˜ì.

ğŸ”§ ë„êµ¬: calculate({'expression': '25 + 17'})

ğŸ’­ ì¶”ë¡ : 42ê°€ ë‚˜ì™”ë‹¤. ì´ì œ 42 * 3ì„ ê³„ì‚°í•˜ì.

ğŸ”§ ë„êµ¬: calculate({'expression': '42 * 3'})

ğŸ’­ ì¶”ë¡ : 126ì´ ë‚˜ì™”ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ 10ì„ ë¹¼ì.

ğŸ”§ ë„êµ¬: calculate({'expression': '126 - 10'})

ğŸ“ ì„¤ëª…: ê³„ì‚° ê²°ê³¼ëŠ” 116ì…ë‹ˆë‹¤.

ë‹¨ê³„ë³„ í’€ì´:
1. (25 + 17) = 42
2. 42 * 3 = 126
3. 126 - 10 = 116
```

> ğŸ’¡ **í•µì‹¬ í¬ì¸íŠ¸**:
> - Content BlocksëŠ” AI ì‘ë‹µì˜ êµ¬ì¡°í™”ëœ í‘œí˜„
> - Thinking blocksëŠ” ëª¨ë¸ì˜ ì¶”ë¡  ê³¼ì •ì„ ë³´ì—¬ì¤Œ
> - Extended thinkingì€ ë¹„ìš©ì´ ë†’ìœ¼ë‹ˆ í•„ìš”í•œ ê²½ìš°ë§Œ ì‚¬ìš©
> - Streamingê³¼ ê²°í•©í•˜ë©´ ì‹¤ì‹œê°„ ì¶”ë¡  ê³¼ì • í‘œì‹œ ê°€ëŠ¥

---

## ğŸ“ ì‹¤ìŠµ ê³¼ì œ

### ê³¼ì œ 1: ê³„ì‚°ê¸° Agent ë§Œë“¤ê¸° (â­â­â˜†)

**ëª©í‘œ**: ìˆ˜í•™ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” Agentë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­**:
1. `add(a, b)`, `subtract(a, b)`, `multiply(a, b)`, `divide(a, b)` ë„êµ¬ êµ¬í˜„
2. "5 ë”í•˜ê¸° 3ì„ í•œ ë‹¤ìŒ, ê·¸ ê²°ê³¼ì— 2ë¥¼ ê³±í•´ì¤˜" ê°™ì€ ë³µì¡í•œ ê³„ì‚° ì²˜ë¦¬
3. System Promptë¡œ Agentë¥¼ "ì¹œì ˆí•œ ìˆ˜í•™ ì„ ìƒë‹˜" í˜ë¥´ì†Œë‚˜ë¡œ ì„¤ì •
4. 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ê°™ì€ ì—ëŸ¬ë¥¼ ì ì ˆíˆ ì²˜ë¦¬

**íŒíŠ¸**:
- `@tool` ë°ì½”ë ˆì´í„° ì‚¬ìš©
- AgentëŠ” ìë™ìœ¼ë¡œ ë„êµ¬ë¥¼ ìˆœì°¨ ì‹¤í–‰í•©ë‹ˆë‹¤
- System Promptì— "ê³„ì‚° ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ì„¸ìš”" ì¶”ê°€

**ì‹œì‘ ì½”ë“œ**:
```python
from langchain.agents import create_agent
from langchain.tools import tool
from langchain_openai import ChatOpenAI

@tool
def add(a: float, b: float) -> float:
    """ë‘ ìˆ«ìë¥¼ ë”í•©ë‹ˆë‹¤."""
    return a + b

# TODO: subtract, multiply, divide ë„êµ¬ ì¶”ê°€

# TODO: Agent ìƒì„±

# TODO: í…ŒìŠ¤íŠ¸
```

**í•´ë‹µ**: [solutions/exercise_01.py](../src/part03_first_agent/solutions/exercise_01.py)

---

### ê³¼ì œ 2: ì—¬í–‰ í”Œë˜ë„ˆ Agent (â­â­â­â˜†)

**ëª©í‘œ**: ì‚¬ìš©ìì˜ ì—¬í–‰ì„ ê³„íší•˜ëŠ” Agentë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­**:
1. ë‹¤ìŒ ë„êµ¬ êµ¬í˜„:
   - `get_weather(city, date)`: ë‚ ì”¨ ì¡°íšŒ
   - `search_attractions(city)`: ê´€ê´‘ì§€ ê²€ìƒ‰
   - `estimate_budget(city, days)`: ì˜ˆì‚° ì¶”ì •
2. System Promptë¡œ Agentë¥¼ "ê²½í—˜ ë§ì€ ì—¬í–‰ ê°€ì´ë“œ"ë¡œ ì„¤ì •
3. ì‚¬ìš©ìê°€ "íŒŒë¦¬ 3ì¼ ì—¬í–‰ ê³„íší•´ì¤˜"ë¼ê³  í•˜ë©´:
   - ë‚ ì”¨ í™•ì¸
   - ì¸ê¸° ê´€ê´‘ì§€ ì¶”ì²œ
   - ì˜ˆì‚° ì¶”ì •
   - ì¢…í•© ì—¬í–‰ ê³„íš ì œì‹œ
4. Streaming ëª¨ë“œë¡œ ì‹¤ì‹œê°„ ê³„íš ê³¼ì • í‘œì‹œ

**íŒíŠ¸**:
- ë„êµ¬ëŠ” ë”ë¯¸ ë°ì´í„°ë¥¼ ë°˜í™˜í•´ë„ ë©ë‹ˆë‹¤
- System Promptì— "ì—¬í–‰ ê³„íšì€ 1) ë‚ ì”¨, 2) ê´€ê´‘ì§€, 3) ì˜ˆì‚° ìˆœì„œë¡œ í™•ì¸í•˜ì„¸ìš”" ì¶”ê°€
- `stream_mode="values"` ì‚¬ìš©

**í•´ë‹µ**: [solutions/exercise_02.py](../src/part03_first_agent/solutions/exercise_02.py)

---

### ê³¼ì œ 3: ë©€í‹° ì—ì´ì „íŠ¸ ëŒ€í™” (â­â­â­â­â˜†)

**ëª©í‘œ**: ì„œë¡œ ë‹¤ë¥¸ ì„±ê²©ì˜ ë‘ Agentë¥¼ ë§Œë“¤ê³  ëŒ€í™”ì‹œì¼œë³´ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­**:
1. Agent A: ë‚™ê´€ì ì´ê³  ê¸ì •ì ì¸ ì„±ê²©
2. Agent B: í˜„ì‹¤ì ì´ê³  ì‹ ì¤‘í•œ ì„±ê²©
3. ê°™ì€ ì§ˆë¬¸("ì„œìš¸ ë‚ ì”¨ ì¢‹ì€ë° ì†Œí’ ê°ˆê¹Œ?")ì„ ë‘ Agentì—ê²Œ ë¬¼ì–´ë³´ê³  ë‹µë³€ ë¹„êµ
4. ë‘ Agentì˜ ë‹µë³€ì„ ì¢…í•©í•˜ì—¬ ìµœì¢… ì˜ì‚¬ê²°ì •ì„ ë‚´ë¦¬ëŠ” ë¡œì§ êµ¬í˜„

**íŒíŠ¸**:
- ê°™ì€ ë„êµ¬, ë‹¤ë¥¸ System Promptë¡œ Agent ìƒì„±
- ê° Agentì˜ ì‘ë‹µì„ ë¶„ì„í•˜ì—¬ ìµœì¢… ê²°ì •
- ReAct íŒ¨í„´ì„ ì´í•´í–ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì œì…ë‹ˆë‹¤

**í•´ë‹µ**: [solutions/exercise_03.py](../src/part03_first_agent/solutions/exercise_03.py)

---

## ğŸ’¡ ì‹¤ì „ íŒ

### Tip 1: Agent ë””ë²„ê¹… ë°©ë²•

Agentê°€ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ:

```python
# ëª¨ë“  ë©”ì‹œì§€ ì¶œë ¥í•˜ì—¬ ì¶”ë¡  ê³¼ì • í™•ì¸
result = agent.invoke({"messages": [{"role": "user", "content": "..."}]})

print("\n=== Agent ì‹¤í–‰ ê³¼ì • ===")
for i, msg in enumerate(result["messages"], 1):
    print(f"\n[{i}] {msg.__class__.__name__}")
    if hasattr(msg, "content"):
        print(f"Content: {msg.content}")
    if hasattr(msg, "tool_calls"):
        print(f"Tool Calls: {msg.tool_calls}")
```

**ë””ë²„ê¹… ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ë„êµ¬ì˜ docstringì´ ëª…í™•í•œê°€?
- [ ] ë„êµ¬ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì… íŒíŠ¸ê°€ ì •í™•í•œê°€?
- [ ] System Promptì— ë„êµ¬ ì‚¬ìš© ì§€ì¹¨ì´ ìˆëŠ”ê°€?
- [ ] LLMì´ ë„êµ¬ë¥¼ í˜¸ì¶œí–ˆëŠ”ê°€? (tool_calls í™•ì¸)
- [ ] ë„êµ¬ê°€ ì˜¬ë°”ë¥¸ ê°’ì„ ë°˜í™˜í–ˆëŠ”ê°€? (ToolMessage í™•ì¸)

### Tip 2: ë¹„ìš© ìµœì í™”

LLM API í˜¸ì¶œ ë¹„ìš©ì„ ì ˆê°í•˜ëŠ” ë°©ë²•:

1. **ì ì ˆí•œ ëª¨ë¸ ì„ íƒ**:
   ```python
   # ê°„ë‹¨í•œ ì‘ì—…: ì €ë ´í•œ ëª¨ë¸
   simple_agent = create_agent("openai:gpt-4o-mini", tools=tools)

   # ë³µì¡í•œ ì‘ì—…: ê°•ë ¥í•œ ëª¨ë¸
   complex_agent = create_agent("anthropic:claude-sonnet-4-5-20250929", tools=tools)
   ```

2. **System Prompt ìµœì í™”**:
   ```python
   # ë‚˜ìœ ì˜ˆ: ë¶ˆí•„ìš”í•˜ê²Œ ê¸´ í”„ë¡¬í”„íŠ¸
   bad_prompt = """
   ë‹¹ì‹ ì€ ìµœê³ ì˜ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë‹¹ì‹ ì€ ëª¨ë“  ê²ƒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤.
   ë‹¹ì‹ ì€ í•­ìƒ ì™„ë²½í•œ ë‹µë³€ì„ ì œê³µí•©ë‹ˆë‹¤. (200ì¤„ ë”...)
   """

   # ì¢‹ì€ ì˜ˆ: ê°„ê²°í•˜ê³  ëª…í™•
   good_prompt = "ë‹¹ì‹ ì€ ë‚ ì”¨ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤."
   ```

3. **ë¶ˆí•„ìš”í•œ ë°˜ë³µ ë°©ì§€**:
   ```python
   system_prompt = """
   ë„êµ¬ ì‚¬ìš© ì›ì¹™:
   - ì´ë¯¸ ì•Œê³  ìˆëŠ” ì •ë³´ëŠ” ë‹¤ì‹œ ì¡°íšŒí•˜ì§€ ë§ˆì„¸ìš”
   - ì—¬ëŸ¬ ë„ì‹œì˜ ë‚ ì”¨ë¥¼ í•œ ë²ˆì— ë¬¼ì–´ë³´ë©´ ë³‘ë ¬ë¡œ ì¡°íšŒí•˜ì„¸ìš”
   """
   ```

### Tip 3: ë„êµ¬ ì‹¤í–‰ íƒ€ì„ì•„ì›ƒ ì„¤ì •

ë„êµ¬ê°€ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ë©´ Agentê°€ ë©ˆì¶¥ë‹ˆë‹¤:

```python
import asyncio
from langchain.tools import tool

@tool
async def slow_search(query: str) -> str:
    """ëŠë¦° ê²€ìƒ‰ ë„êµ¬ (íƒ€ì„ì•„ì›ƒ ìˆìŒ)"""
    try:
        # 5ì´ˆ íƒ€ì„ì•„ì›ƒ
        result = await asyncio.wait_for(
            actual_search(query),
            timeout=5.0
        )
        return result
    except asyncio.TimeoutError:
        return "ê²€ìƒ‰ ì‹œê°„ ì´ˆê³¼. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
```

### Tip 4: ë„êµ¬ ê²°ê³¼ ìºì‹±

ê°™ì€ ì •ë³´ë¥¼ ë°˜ë³µ ì¡°íšŒí•˜ì§€ ì•Šë„ë¡:

```python
from functools import lru_cache

@tool
@lru_cache(maxsize=100)
def get_weather_cached(city: str) -> str:
    """ìºì‹±ëœ ë‚ ì”¨ ì¡°íšŒ (5ë¶„ê°„ ìœ íš¨)"""
    # ì‹¤ì œ API í˜¸ì¶œ
    return f"{city}: ë§‘ìŒ, 22Â°C"

# ê°™ì€ ë„ì‹œë¥¼ ì—¬ëŸ¬ ë²ˆ ì¡°íšŒí•´ë„ APIëŠ” í•œ ë²ˆë§Œ í˜¸ì¶œë¨
```

### Tip 5: ë©€í‹°ëª¨ë‹¬ Agent

ì´ë¯¸ì§€, íŒŒì¼ ë“±ì„ ì²˜ë¦¬í•˜ëŠ” Agent:

```python
from langchain.tools import tool
import base64

@tool
def analyze_image(image_path: str) -> str:
    """ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."""
    with open(image_path, "rb") as f:
        image_data = base64.b64encode(f.read()).decode()

    # ë©€í‹°ëª¨ë‹¬ ëª¨ë¸ì— ì „ë‹¬
    # (ì‹¤ì œ êµ¬í˜„ì€ ëª¨ë¸ì— ë”°ë¼ ë‹¤ë¦„)
    return "ì´ë¯¸ì§€ ë¶„ì„ ê²°ê³¼: ..."

# ë©€í‹°ëª¨ë‹¬ ëª¨ë¸ ì‚¬ìš©
from langchain_openai import ChatOpenAI

model = ChatOpenAI(model="gpt-4o")  # ë©€í‹°ëª¨ë‹¬ ì§€ì›
agent = create_agent(model, tools=[analyze_image])
```

---

## â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

<details>
<summary>Q1: Agentê°€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í™˜ê°(hallucination)ìœ¼ë¡œ ë‹µë³€í•´ìš”</summary>

**A**: ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. **ë„êµ¬ docstringì´ ëª…í™•í•œê°€?**
   ```python
   # ë‚˜ìœ ì˜ˆ
   @tool
   def get_data(x: str) -> str:
       """ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤."""  # ë„ˆë¬´ ëª¨í˜¸
       pass

   # ì¢‹ì€ ì˜ˆ
   @tool
   def get_weather(city: str) -> str:
       """ì£¼ì–´ì§„ ë„ì‹œì˜ í˜„ì¬ ë‚ ì”¨ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
       ì‹¤ì‹œê°„ ê¸°ì˜¨, ë‚ ì”¨ ìƒíƒœ, ìŠµë„ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤."""
       pass
   ```

2. **System Promptì— ë„êµ¬ ì‚¬ìš© ê°•ì œ**
   ```python
   system_prompt = """
   ì¤‘ìš”: ë‚ ì”¨ ì •ë³´ë¥¼ ë¬¼ì–´ë³´ë©´ ë°˜ë“œì‹œ get_weather ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
   ì ˆëŒ€ ì¶”ì¸¡í•˜ê±°ë‚˜ ì„ì˜ë¡œ ë‹µë³€í•˜ì§€ ë§ˆì„¸ìš”.
   """
   ```

3. **ëª¨ë¸ì˜ temperatureë¥¼ ë‚®ì¶”ê¸°**
   ```python
   model = ChatOpenAI(model="gpt-4o", temperature=0)  # ì¼ê´€ì„± í–¥ìƒ
   ```

4. **ë” ê°•ë ¥í•œ ëª¨ë¸ ì‚¬ìš©**
   - GPT-4o-mini â†’ GPT-4o
   - Claude Haiku â†’ Claude Sonnet
</details>

<details>
<summary>Q2: Agentê°€ ë¬´í•œ ë£¨í”„ì— ë¹ ì ¸ìš”</summary>

**A**: Agentê°€ ê³„ì† ê°™ì€ ë„êµ¬ë¥¼ ë°˜ë³µ í˜¸ì¶œí•˜ëŠ” ê²½ìš°:

1. **ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ ì œí•œ** (ê¸°ë³¸: 25íšŒ)
   ```python
   agent = create_agent(model, tools=tools)
   result = agent.invoke(
       {"messages": [...]},
       config={"recursion_limit": 10}  # 10íšŒë¡œ ì œí•œ
   )
   ```

2. **ë„êµ¬ê°€ ëª…í™•í•œ ì¢…ë£Œ ì¡°ê±´ì„ ë°˜í™˜í•˜ë„ë¡**
   ```python
   @tool
   def search(query: str, max_results: int = 5) -> str:
       """ê²€ìƒ‰í•©ë‹ˆë‹¤. ê²°ê³¼ê°€ ì—†ìœ¼ë©´ 'ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ'ì„ ë°˜í™˜í•©ë‹ˆë‹¤."""
       results = do_search(query)
       if not results:
           return "ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ. ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•˜ì„¸ìš”."
       return results[:max_results]
   ```

3. **System Promptì— ì¢…ë£Œ ì¡°ê±´ ëª…ì‹œ**
   ```python
   system_prompt = """
   ë„êµ¬ ì‚¬ìš© ê·œì¹™:
   - ê°™ì€ ë„êµ¬ë¥¼ 3ë²ˆ ì´ìƒ ë°˜ë³µí•˜ì§€ ë§ˆì„¸ìš”
   - ì •ë³´ê°€ ì¶©ë¶„í•˜ë©´ ë°”ë¡œ ë‹µë³€í•˜ì„¸ìš”
   """
   ```
</details>

<details>
<summary>Q3: ì—¬ëŸ¬ Agentë¥¼ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?</summary>

**A**: ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤! ì—¬ëŸ¬ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤:

**ë°©ë²• 1: í•œ Agentì˜ ì¶œë ¥ì„ ë‹¤ë¥¸ Agentì˜ ì…ë ¥ìœ¼ë¡œ**
```python
# Agent 1: ì •ë³´ ìˆ˜ì§‘
collector = create_agent(model, tools=[search, database_query])
data = collector.invoke({"messages": [{"role": "user", "content": "ë°ì´í„° ìˆ˜ì§‘"}]})

# Agent 2: ë¶„ì„
analyzer = create_agent(model, tools=[analyze, visualize])
result = analyzer.invoke({
    "messages": [{"role": "user", "content": f"ë‹¤ìŒ ë°ì´í„°ë¥¼ ë¶„ì„: {data}"}]
})
```

**ë°©ë²• 2: LangGraphë¡œ ë©€í‹° ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš° êµ¬ì„±**
```python
from langgraph.graph import StateGraph

# ë³µì¡í•œ ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•
# Part 7ì—ì„œ ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤
```

ë” ìì„¸í•œ ë‚´ìš©ì€ [Part 7: Multi-Agent ì‹œìŠ¤í…œ](./part07_multi_agent.md)ì„ ì°¸ê³ í•˜ì„¸ìš”.
</details>

<details>
<summary>Q4: create_agent()ì™€ LangGraphì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</summary>

**A**: `create_agent()`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ LangGraphë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

| íŠ¹ì§• | create_agent() | LangGraph (ì§ì ‘ ì‚¬ìš©) |
|------|----------------|----------------------|
| **ë‚œì´ë„** | ì‰¬ì›€ | ì¤‘ê¸‰~ê³ ê¸‰ |
| **ìœ ì—°ì„±** | ì œí•œì  | ë§¤ìš° ë†’ìŒ |
| **ì‚¬ìš© ì‚¬ë¡€** | ì¼ë°˜ì ì¸ Agent | ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° |
| **ì»¤ìŠ¤í„°ë§ˆì´ì§•** | System Prompt, Middleware | ì™„ì „ ì œì–´ |

**ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í• ê¹Œ?**
- **create_agent()**: ëŒ€ë¶€ë¶„ì˜ ê²½ìš° (80%)
- **LangGraph**: ë³µì¡í•œ ì œì–´ íë¦„, ë©€í‹° ì—ì´ì „íŠ¸, ì¡°ê±´ë¶€ ë¼ìš°íŒ… ë“±

LangGraphëŠ” [Part 5: ë¯¸ë“¤ì›¨ì–´ & ê³ ê¸‰ íŒ¨í„´](./part05_middleware.md)ì—ì„œ ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.
</details>

<details>
<summary>Q5: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ Agentë¥¼ ë°°í¬í•˜ë ¤ë©´?</summary>

**A**: í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ê³ ë ¤ì‚¬í•­:

1. **ì—ëŸ¬ ì²˜ë¦¬**
   ```python
   try:
       result = agent.invoke({"messages": [...]})
   except Exception as e:
       logger.error(f"Agent ì‹¤í–‰ ì‹¤íŒ¨: {e}")
       # í´ë°± ì‘ë‹µ
       return {"error": "ì¼ì‹œì ì¸ ì˜¤ë¥˜ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."}
   ```

2. **Rate Limiting**
   ```python
   from ratelimit import limits, sleep_and_retry

   @sleep_and_retry
   @limits(calls=10, period=60)  # ë¶„ë‹¹ 10íšŒ
   def invoke_agent(query):
       return agent.invoke({"messages": [{"role": "user", "content": query}]})
   ```

3. **ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§**
   ```python
   # LangSmith ì—°ë™
   import os
   os.environ["LANGCHAIN_TRACING_V2"] = "true"
   os.environ["LANGCHAIN_API_KEY"] = "your-api-key"
   ```

4. **ì²´í¬í¬ì¸í„° ì‚¬ìš© (ëŒ€í™” ê¸°ë¡ ì €ì¥)**
   ```python
   from langgraph.checkpoint.postgres import PostgresSaver

   checkpointer = PostgresSaver(connection_string="postgresql://...")
   agent = create_agent(model, tools=tools, checkpointer=checkpointer)
   ```

ë” ìì„¸í•œ ë‚´ìš©ì€ [Part 10: ë°°í¬ & ìš´ì˜](./part10_deployment.md)ì„ ì°¸ê³ í•˜ì„¸ìš”.
</details>

---

## ğŸ”— ì‹¬í™” í•™ìŠµ

ì´ íŒŒíŠ¸ì˜ ê¸°ì´ˆë¥¼ ë§ˆìŠ¤í„°í–ˆë‹¤ë©´:

1. **ê³µì‹ ë¬¸ì„œ ì‹¬í™”**
   - [06-agents.md](../official/06-agents_ko.md#ê³ ê¸‰-ê°œë…) - Structured Output, Memory, Middleware
   - [ìŠ¤íŠ¸ë¦¬ë° ê°œìš”](../official/11-streaming-overview_ko.md) - ê³ ê¸‰ ìŠ¤íŠ¸ë¦¬ë° ê¸°ë²•
   - [ë¯¸ë“¤ì›¨ì–´ ê°œìš”](../official/14-middleware-overview_ko.md) - ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´ ì‘ì„±

2. **ê´€ë ¨ ë…¼ë¬¸**
   - [ReAct: Synergizing Reasoning and Acting in Language Models](https://arxiv.org/abs/2210.03629) - ReAct íŒ¨í„´ì˜ ì›ì¡° ë…¼ë¬¸
   - [Toolformer: Language Models Can Teach Themselves to Use Tools](https://arxiv.org/abs/2302.04761) - Tool Learning
   - [Chain-of-Thought Prompting Elicits Reasoning in Large Language Models](https://arxiv.org/abs/2201.11903) - ì¶”ë¡  ëŠ¥ë ¥ í–¥ìƒ

3. **ì‹¤ì „ ì˜ˆì œ**
   - [LangChain Cookbook](https://github.com/langchain-ai/langchain/tree/master/cookbook) - ë‹¤ì–‘í•œ Agent ì˜ˆì œ
   - [LangChain Templates](https://github.com/langchain-ai/langchain/tree/master/templates) - í”„ë¡œë•ì…˜ í…œí”Œë¦¿

4. **ë‹¤ìŒ ë‹¨ê³„ í”„ë¡œì íŠ¸**
   - ë‚ ì”¨ ë¹„ì„œ Agent êµ¬í˜„ (ì´ íŒŒíŠ¸ì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ í™•ì¥)
   - ë¬¸ì„œ QA Agent êµ¬í˜„ (Part 8: RAG & MCPì—ì„œ í•™ìŠµ)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

Part 3ë¥¼ ì™„ë£Œí•˜ê¸° ì „ì— í™•ì¸í•˜ì„¸ìš”:

- [ ] `create_agent()`ë¡œ ê¸°ë³¸ Agentë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
- [ ] Agentì˜ ì‹¤í–‰ ë£¨í”„ì™€ ì¢…ë£Œ ì¡°ê±´ì„ ì´í•´í•œë‹¤
- [ ] ì‹¤ì „ ë‚ ì”¨ Agentë¥¼ êµ¬í˜„í•˜ê³  ì‹¤í–‰í–ˆë‹¤
- [ ] ReAct íŒ¨í„´(Reasoning â†’ Acting â†’ Observation)ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] System Promptë¥¼ ì‘ì„±í•˜ì—¬ Agentì˜ ì„±ê²©ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤
- [ ] ê°™ì€ ë„êµ¬ë¡œ ë‹¤ë¥¸ í˜ë¥´ì†Œë‚˜ì˜ Agentë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤
- [ ] `stream()` ë©”ì„œë“œë¡œ ì‹¤ì‹œê°„ ì‘ë‹µì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤
- [ ] `bind_tools()`ì™€ `create_agent()`ì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ëª¨ë“  ì˜ˆì œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ìˆ˜ì •í•´ë´¤ë‹¤
- [ ] ìµœì†Œ 1ê°œ ì´ìƒì˜ ì‹¤ìŠµ ê³¼ì œë¥¼ ì™„ë£Œí–ˆë‹¤

---

## ë‹¤ìŒ ë‹¨ê³„

âœ… Part 3 ì™„ë£Œ!
â¡ï¸ [Part 4: Memory & Context Managementë¡œ ì´ë™](./part04_memory.md)

**Part 4 ë¯¸ë¦¬ë³´ê¸°**:
- ëŒ€í™” ê¸°ë¡ ê´€ë¦¬ (Short-term Memory)
- ì²´í¬í¬ì¸í„°ë¡œ ìƒíƒœ ì €ì¥
- ë©€í‹°í„´ ëŒ€í™” êµ¬í˜„
- ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ê´€ë¦¬
- ëŒ€í™” ìš”ì•½ (Summarization)

**í”„ë¡œì íŠ¸ë¡œ ë„˜ì–´ê°€ê¸°**:
ì§€ê¸ˆ ë°°ìš´ ë‚´ìš©ì„ ë°”ë¡œ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´:
- ì´ íŒŒíŠ¸ì—ì„œ ë°°ìš´ ë‚ ì”¨ Agentë¥¼ ì™„ì „í•œ í”„ë¡œì íŠ¸ë¡œ í™•ì¥í•´ë³´ì„¸ìš”

---

**í•™ìŠµ ì§„ë„**: â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30% (Part 3/10 ì™„ë£Œ)

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-02-18*
