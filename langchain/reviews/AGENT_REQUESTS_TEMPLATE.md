# Part [번호]: [파트 제목] 에이전트 요청사항

> 작성일: YYYY-MM-DD
> 기반: `decisions.md` 확정 사항 (YYYY-MM-DD 리뷰 회의)

---

## 사전 작업: 백업 생성

작업 시작 전 원본 파일을 백업하여, 수정 결과가 만족스럽지 않을 경우 즉시 원복할 수 있도록 한다.

```bash
cp docs/partXX_제목.md docs/partXX_제목.md.bak
cp src/partXX_제목/수정대상파일.py src/partXX_제목/수정대상파일.py.bak
```

> 모든 요청 완료 및 최종 확인 통과 후 백업 파일을 삭제한다. "최종 확인" 섹션 참조.

---

<!-- ================================================================
  요청 유형별 템플릿

  아래 예시들은 실제 리뷰에서 자주 발생하는 요청 유형을 보여준다.
  해당되는 유형을 복사하여 사용하고, 불필요한 유형은 삭제한다.
================================================================ -->

## 요청 1: [섹션 축소/삭제 — 예시]

- **파일**: `docs/partXX_제목.md`
- **위치**: LNNN\~LNNN (섹션 X.X 섹션제목, 약 NNN줄)
- **현재**: [현재 포함된 내용 요약]
- **변경**:
  1. **유지**: LNNN\~LNNN (유지할 부분 설명)
  2. **삭제**: LNNN\~LNNN (삭제할 부분 설명)
  3. **축소**: LNNN\~LNNN (축소 방법 설명)
  4. **추가**: 축소된 섹션 말미에 안내 문구 삽입 — "[후속 파트/공식 문서]를 참조하세요"
- **상세**: "회의 발언 인용" (발언자). 축소 사유 및 맥락 설명
- **예상 감축**: 약 NNN\~NNN줄 감소

### 검증 — 요청 1

- [ ] 유지된 코드 블록이 문법적으로 완전한지 확인
- [ ] 삭제된 내용에 대한 참조가 남아있지 않은지 검색
- [ ] 안내 문구의 링크가 유효한지 확인
- [ ] 섹션 번호 연속성 유지

---

## 요청 2: [deprecated API 수정 (교안) — 예시]

- **파일**: `docs/partXX_제목.md`
- **위치/변경**:

| 줄 | 현재 | 변경 |
| --- | --- | --- |
| LNNN | `from old_module import old_func` | `from new_module import new_func` |
| LNNN | `old_func(args)` | `new_func(args)` |

- **상세**: `old_func`는 버전 X.X에서 제거됨. `new_func`가 공식 대체 API. 다른 요청에서 해당 코드 블록이 삭제되면 이 수정은 불필요해짐 — 삭제 범위와 중복 여부 확인 필요

### 검증 — 요청 2

- [ ] 교안 내 `from old_module import` 패턴이 0건인지 grep 확인
- [ ] 새 API의 import 경로가 코드 블록 상단에 포함되는지 확인
- [ ] 다른 요청의 삭제 범위와 중복 여부 확인

---

## 요청 3: [deprecated API 수정 (소스코드) — 예시]

- **파일**: `src/partXX_제목/파일명.py`
- **위치/변경**:

| 줄 | 현재 | 변경 |
| --- | --- | --- |
| LNNN | `from lib import OldClass` | `from lib import NewClass` |
| LNNN | `@old_decorator` | `@new_decorator` + 필요 시 `@classmethod` 추가 |
| LNNN | `.old_method()` | `.new_method()` |

- **상세**: 라이브러리 vN에서 변경된 API. `solutions/` 디렉토리는 이미 새 패턴을 사용 중이므로 본 파일과의 일관성 확보 필요

### 검증 — 요청 3

- [ ] `python -m py_compile src/partXX_제목/파일명.py` 통과
- [ ] `python src/partXX_제목/파일명.py` 실행 시 에러 없음
- [ ] 교안의 대응 코드 블록에도 동일 패턴이 반영되었는지 확인
- [ ] deprecated 패턴이 소스코드 전체에서 0건인지 grep 확인

---

## 요청 4: [모델명/버전 최신화 검증 — 예시]

- **파일**: `docs/partXX_제목.md`, `src/partXX_제목/*.py`
- **현재 상태** (사전 조사 결과):
  - [프로바이더 A]: `모델-ID` — 공식 문서와 대조 필요
  - [프로바이더 B]: `모델-ID` — 이미 최신
- **변경**:
  1. 각 모델 ID를 공식 문서와 대조하여 실존 여부 확인. 불일치 시 실제 ID로 수정
  2. 소스코드의 모델 ID도 동일 기준 검증
- **상세**: "회의 발언 인용" (발언자). 자료의 최신성 확보 필요

### 검증 — 요청 4

- [ ] 교안 내 모든 모델 ID를 추출하여 공식 문서와 1:1 대조
- [ ] `grep -n "모델패턴" docs/partXX_제목.md`로 전수 확인
- [ ] `grep -n "모델패턴" src/partXX_제목/*.py`로 전수 확인

---

## 요청 5: [보안/품질 경고 추가 — 예시]

- **파일**: `src/partXX_제목/파일명.py`
- **위치**: LNNN\~LNNN (`함수명` 함수)
- **현재**:

  ```python
  # 위험한 코드 예시
  result = dangerous_function(user_input)
  ```

- **변경** (택 1):
  - **방안 A** (최소 변경): 호출 위에 경고 주석 추가

    ```python
    # 주의: dangerous_function()은 [위험 설명].
    # 프로덕션에서는 [안전한 대안]을 사용하세요.
    result = dangerous_function(user_input)
    ```

  - **방안 B** (안전한 대안 교체): 안전한 함수로 교체

    ```python
    result = safe_alternative(user_input)
    ```

- **권장**: 교육 목적의 예제이므로 **방안 A** 채택. 학습자가 패턴을 그대로 프로덕션에 복사하는 것을 방지하면서도 흐름 설명의 단순성 유지
- **상세**: [리뷰어명] 리뷰에서 지적. 학습자가 위험 패턴을 그대로 복사할 위험

### 검증 — 요청 5

- [ ] 경고 주석이 위험 코드 직전에 위치하는지 확인
- [ ] 교안에서 해당 함수를 인용하는 부분이 있으면 동일 경고 반영
- [ ] `grep -rn "dangerous_function" src/partXX_제목/`로 다른 사용이 없는지 확인

---

## 요청 6: [교안 메타 정보 추가/수정 — 예시]

- **파일**: `docs/partXX_제목.md`
- **위치**: L1\~L7 (문서 상단 메타 정보 영역)
- **현재**:

  ```markdown
  > 📚 **학습 시간**: 약 N시간
  > 🎯 **난이도**: ⭐⭐☆☆☆
  > 📖 **공식 문서**: [참조 문서](링크)
  > 💻 **예제 코드**: [디렉토리](링크)
  ```

- **변경**: 메타 정보 블록에 항목 추가

  ```markdown
  > 📚 **학습 시간**: 약 N시간
  > 🎯 **난이도**: ⭐⭐☆☆☆
  > 🛠️ **환경 설정**: [SETUP_GUIDE.md](../SETUP_GUIDE.md) — API 키 설정, 패키지 설치, 실행 환경 구성
  > 📖 **공식 문서**: [참조 문서](링크)
  > 💻 **예제 코드**: [디렉토리](링크)
  ```

- **상세**: 환경 설정 문제로 초반에 막히는 학습자를 위해 가시성 향상

### 검증 — 요청 6

- [ ] 링크 대상 파일이 실제로 존재하는지 확인
- [ ] 상대 경로가 올바른지 확인

---

## 요청 7: [교안 라인 참조/파일명 검증 — 예시]

- **파일**: `docs/partXX_제목.md`
- **현재 상태** (사전 조사 결과):

| 교안 줄 | 참조 내용 | 실제 소스코드 | 상태 |
| --- | --- | --- | --- |
| LNNN | `파일명.py 라인 NN-NN` | `함수명()` LNN\~LNN | 정상/불일치 |

- **변경**: 불일치 항목 수정. 다만, **다른 요청에서 섹션 축소 후 라인 번호가 변동**되므로 축소 작업 완료 후 모든 라인 참조를 재검증해야 함

### 검증 — 요청 7

- [ ] 섹션 축소 완료 후, `grep -n "예제 코드" docs/partXX_제목.md`로 모든 라인 참조 추출
- [ ] 각 참조가 실제 소스코드 라인과 일치하는지 전수 대조
- [ ] 파일명이 실제 존재하는 파일과 일치하는지 확인

---

## 요청 8: [전체 분량 축소 목표 확인 — 예시]

- **파일**: `docs/partXX_제목.md`
- **목표**: 현재 N,NNN줄 → **N,NNN줄 이하** (현재의 N/N)
- **예상 감축 내역**:

| 요청 | 대상 섹션 | 예상 감축 |
| --- | --- | --- |
| 요청 N | 섹션명 (LNNN\~LNNN) | NNN\~NNN줄 |
| 요청 N | 섹션명 (LNNN\~LNNN) | NNN\~NNN줄 |
| **합계** | | **NNN\~NNN줄** |

- **예상 결과**: 약 N,NNN줄 (축소율 약 NN%)
- **참고**: 목표에 미달할 경우 추가 축소 검토 대상:
  - [추가 축소 후보 섹션 1] (약 NNN줄)
  - [추가 축소 후보 섹션 2] (약 NNN줄)
- **상세**: "회의 발언 인용" (발언자). 우선 핵심 섹션 축소 후 줄 수 확인, 부족 시 추가 축소 범위 협의

### 검증 — 요청 8

- [ ] `wc -l docs/partXX_제목.md`로 최종 줄 수 확인
- [ ] 목표치 달성 여부 판단
- [ ] 미달 시 추가 축소 대상 섹션 제안

---

<!-- 요청을 추가할 때 위 형식을 복사하여 사용 -->

## 작업 순서 권장

```text
[사전 작업] 백업 생성     ← cp *.bak
    ↓
단순 추가/수정 요청       ← 라인 변동 최소인 작업 먼저
    ↓
소스코드 수정 요청        ← deprecated API, 보안 경고 등
    ↓
검증 요청                ← 모델명 검증 등
    ↓
대량 삭제/축소 요청       ← 뒤쪽 섹션부터 진행
    ↓
라인 참조 재검증          ← 축소 후 라인 번호 변동 반영
    ↓
분량 목표 확인            ← 최종 줄 수 체크
    ↓
[최종 확인] 통과 시 백업 삭제  ← rm *.bak
```

**핵심 원칙**: 대량 삭제는 뒤쪽 섹션부터 진행하여 앞쪽 라인 번호에 영향을 주지 않도록 한다. 삭제 전에 점 수정을 먼저 완료한다.

---

## 최종 확인

모든 요청 반영 후 아래를 확인합니다.

- [ ] 수정된 교안 전체를 한 번 읽어 흐름이 자연스러운지 확인
- [ ] 수정된 예제 코드가 `python -m py_compile` 통과
- [ ] decisions.md의 확정 항목이 빠짐없이 반영되었는지 대조
- [ ] git diff로 변경 사항 최종 리뷰
- [ ] 최종 줄 수가 목표에 도달했는지 확인 (분량 축소 요청이 있는 경우)
- [ ] 위 항목 모두 통과 시 백업 파일 삭제:

```bash
rm docs/partXX_제목.md.bak
rm src/partXX_제목/수정대상파일.py.bak
```

> 문제 발견 시 백업에서 원복: `cp docs/partXX_제목.md.bak docs/partXX_제목.md`
